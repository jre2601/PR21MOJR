import{j as vi,E as di,H as gi,G as R,I as Bt,J as Me,K as Ae,N as pi,Q as at,U as lt,W as Ut,X as jt,Y as Ot,Z as Ct,_ as Ht,$ as Vt,a0 as zt,l as Qt,a1 as xi,t as pe,a2 as mi,a3 as Z,a4 as ot,a5 as Et,a6 as Zt,a7 as Ze,a8 as Si,g as vt,a9 as Ii,aa as ut,c as Jt,ab as yi,ac as Ti,e as Kt,i as _t,ad as Ge,ae as Oi,af as Tt,ag as Ci,ah as Ne,m as $t,x as wt,ai as Ei,aj as ve,ak as wi,al as Li,am as H,an as de,ao as Ri,ap as Di,aq as ki,ar as Be,b as ue,as as Fi,at as Pi,w as We,p as Wt,au as bt,av as Mi,n as Ai,aw as Gi,ax as Ni,ay as Yt,az as Bi,aA as Wi,aB as bi,aC as be,aD as Yi,aE as Xi,aF as Ui,aG as ji,B as Hi,y as Vi,aH as Je,F as zi,P as Zi,T as Ji,O as Ki,z as $i,M as qi,C as Qi}from"./Tile.72557d1c.js";function tr(l,r,t,i){for(var e=l[r],a=l[r+1],n=0,s=r+i;s<t;s+=i){var o=l[s],h=l[s+1];n+=Math.sqrt((o-e)*(o-e)+(h-a)*(h-a)),e=o,a=h}return n}var er={POINT:"point",LINE:"line"},Rt={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Xt=[Rt.FILL],st=[Rt.STROKE],ht=[Rt.BEGIN_PATH],Ye=[Rt.CLOSE_PATH],y=Rt,ir=function(){function l(){}return l.prototype.drawCustom=function(r,t,i,e){},l.prototype.drawGeometry=function(r){},l.prototype.setStyle=function(r){},l.prototype.drawCircle=function(r,t){},l.prototype.drawFeature=function(r,t){},l.prototype.drawGeometryCollection=function(r,t){},l.prototype.drawLineString=function(r,t){},l.prototype.drawMultiLineString=function(r,t){},l.prototype.drawMultiPoint=function(r,t){},l.prototype.drawMultiPolygon=function(r,t){},l.prototype.drawPoint=function(r,t){},l.prototype.drawPolygon=function(r,t){},l.prototype.drawText=function(r,t){},l.prototype.setFillStrokeStyle=function(r,t){},l.prototype.setImageStyle=function(r,t){},l.prototype.setTextStyle=function(r,t){},l}(),Ke=ir,rr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),nr=function(l){rr(r,l);function r(t,i,e,a){var n=l.call(this)||this;return n.tolerance=t,n.maxExtent=i,n.pixelRatio=a,n.maxLineWidth=0,n.resolution=e,n.beginGeometryInstruction1_=null,n.beginGeometryInstruction2_=null,n.bufferedMaxExtent_=null,n.instructions=[],n.coordinates=[],n.tmpCoordinate_=[],n.hitDetectionInstructions=[],n.state={},n}return r.prototype.applyPixelRatio=function(t){var i=this.pixelRatio;return i==1?t:t.map(function(e){return e*i})},r.prototype.appendFlatPointCoordinates=function(t,i){for(var e=this.getBufferedMaxExtent(),a=this.tmpCoordinate_,n=this.coordinates,s=n.length,o=0,h=t.length;o<h;o+=i)a[0]=t[o],a[1]=t[o+1],vi(e,a)&&(n[s++]=a[0],n[s++]=a[1]);return s},r.prototype.appendFlatLineCoordinates=function(t,i,e,a,n,s){var o=this.coordinates,h=o.length,f=this.getBufferedMaxExtent();s&&(i+=a);var u=t[i],c=t[i+1],_=this.tmpCoordinate_,v=!0,d,g,m;for(d=i+a;d<e;d+=a)_[0]=t[d],_[1]=t[d+1],m=di(f,_),m!==g?(v&&(o[h++]=u,o[h++]=c,v=!1),o[h++]=_[0],o[h++]=_[1]):m===gi.INTERSECTING?(o[h++]=_[0],o[h++]=_[1],v=!1):v=!0,u=_[0],c=_[1],g=m;return(n&&v||d===i+a)&&(o[h++]=u,o[h++]=c),h},r.prototype.drawCustomCoordinates_=function(t,i,e,a,n){for(var s=0,o=e.length;s<o;++s){var h=e[s],f=this.appendFlatLineCoordinates(t,i,h,a,!1,!1);n.push(f),i=h}return i},r.prototype.drawCustom=function(t,i,e,a){this.beginGeometry(t,i);var n=t.getType(),s=t.getStride(),o=this.coordinates.length,h,f,u,c,_;switch(n){case R.MULTI_POLYGON:h=t.getOrientedFlatCoordinates(),c=[];var v=t.getEndss();_=0;for(var d=0,g=v.length;d<g;++d){var m=[];_=this.drawCustomCoordinates_(h,_,v[d],s,m),c.push(m)}this.instructions.push([y.CUSTOM,o,c,t,e,Ae]),this.hitDetectionInstructions.push([y.CUSTOM,o,c,t,a||e,Ae]);break;case R.POLYGON:case R.MULTI_LINE_STRING:u=[],h=n==R.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),_=this.drawCustomCoordinates_(h,0,t.getEnds(),s,u),this.instructions.push([y.CUSTOM,o,u,t,e,Me]),this.hitDetectionInstructions.push([y.CUSTOM,o,u,t,a||e,Me]);break;case R.LINE_STRING:case R.CIRCLE:h=t.getFlatCoordinates(),f=this.appendFlatLineCoordinates(h,0,h.length,s,!1,!1),this.instructions.push([y.CUSTOM,o,f,t,e,Bt]),this.hitDetectionInstructions.push([y.CUSTOM,o,f,t,a||e,Bt]);break;case R.MULTI_POINT:h=t.getFlatCoordinates(),f=this.appendFlatPointCoordinates(h,s),f>o&&(this.instructions.push([y.CUSTOM,o,f,t,e,Bt]),this.hitDetectionInstructions.push([y.CUSTOM,o,f,t,a||e,Bt]));break;case R.POINT:h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),f=this.coordinates.length,this.instructions.push([y.CUSTOM,o,f,t,e]),this.hitDetectionInstructions.push([y.CUSTOM,o,f,t,a||e]);break}this.endGeometry(i)},r.prototype.beginGeometry=function(t,i){this.beginGeometryInstruction1_=[y.BEGIN_GEOMETRY,i,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[y.BEGIN_GEOMETRY,i,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},r.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},r.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var i,e=t.length,a,n,s=-1;for(i=0;i<e;++i)a=t[i],n=a[0],n==y.END_GEOMETRY?s=i:n==y.BEGIN_GEOMETRY&&(a[2]=i,pi(this.hitDetectionInstructions,s,i),s=-1)},r.prototype.setFillStrokeStyle=function(t,i){var e=this.state;if(t){var a=t.getColor();e.fillStyle=at(a||lt)}else e.fillStyle=void 0;if(i){var n=i.getColor();e.strokeStyle=at(n||Ut);var s=i.getLineCap();e.lineCap=s!==void 0?s:jt;var o=i.getLineDash();e.lineDash=o?o.slice():Ot;var h=i.getLineDashOffset();e.lineDashOffset=h||Ct;var f=i.getLineJoin();e.lineJoin=f!==void 0?f:Ht;var u=i.getWidth();e.lineWidth=u!==void 0?u:Vt;var c=i.getMiterLimit();e.miterLimit=c!==void 0?c:zt,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0},r.prototype.createFill=function(t){var i=t.fillStyle,e=[y.SET_FILL_STYLE,i];return typeof i!="string"&&e.push(!0),e},r.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},r.prototype.createStroke=function(t){return[y.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},r.prototype.updateFillStyle=function(t,i){var e=t.fillStyle;(typeof e!="string"||t.currentFillStyle!=e)&&(e!==void 0&&this.instructions.push(i.call(this,t)),t.currentFillStyle=e)},r.prototype.updateStrokeStyle=function(t,i){var e=t.strokeStyle,a=t.lineCap,n=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,h=t.lineWidth,f=t.miterLimit;(t.currentStrokeStyle!=e||t.currentLineCap!=a||n!=t.currentLineDash&&!Qt(t.currentLineDash,n)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=h||t.currentMiterLimit!=f)&&(e!==void 0&&i.call(this,t),t.currentStrokeStyle=e,t.currentLineCap=a,t.currentLineDash=n,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=h,t.currentMiterLimit=f)},r.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[y.END_GEOMETRY,t];this.instructions.push(i),this.hitDetectionInstructions.push(i)},r.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=xi(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;pe(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},r}(Ke),Dt=nr,ar=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),sr=function(l){ar(r,l);function r(t,i,e,a){var n=l.call(this,t,i,e,a)||this;return n.hitDetectionImage_=null,n.image_=null,n.imagePixelRatio_=void 0,n.anchorX_=void 0,n.anchorY_=void 0,n.height_=void 0,n.opacity_=void 0,n.originX_=void 0,n.originY_=void 0,n.rotateWithView_=void 0,n.rotation_=void 0,n.scale_=void 0,n.width_=void 0,n.declutterImageWithText_=void 0,n}return r.prototype.drawPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),a=t.getStride(),n=this.coordinates.length,s=this.appendFlatPointCoordinates(e,a);this.instructions.push([y.DRAW_IMAGE,n,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,n,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.drawMultiPoint=function(t,i){if(!!this.image_){this.beginGeometry(t,i);var e=t.getFlatCoordinates(),a=t.getStride(),n=this.coordinates.length,s=this.appendFlatPointCoordinates(e,a);this.instructions.push([y.DRAW_IMAGE,n,s,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([y.DRAW_IMAGE,n,s,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(i)}},r.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,l.prototype.finish.call(this)},r.prototype.setImageStyle=function(t,i){var e=t.getAnchor(),a=t.getSize(),n=t.getHitDetectionImage(),s=t.getImage(this.pixelRatio),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=n,this.image_=s,this.height_=a[1],this.opacity_=t.getOpacity(),this.originX_=o[0]*this.imagePixelRatio_,this.originY_=o[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=a[0],this.declutterImageWithText_=i},r}(Dt),or=sr,hr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),lr=function(l){hr(r,l);function r(t,i,e,a){return l.call(this,t,i,e,a)||this}return r.prototype.drawFlatCoordinates_=function(t,i,e,a){var n=this.coordinates.length,s=this.appendFlatLineCoordinates(t,i,e,a,!1,!1),o=[y.MOVE_TO_LINE_TO,n,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),e},r.prototype.drawLineString=function(t,i){var e=this.state,a=e.strokeStyle,n=e.lineWidth;if(!(a===void 0||n===void 0)){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,Ot,Ct],ht);var s=t.getFlatCoordinates(),o=t.getStride();this.drawFlatCoordinates_(s,0,s.length,o),this.hitDetectionInstructions.push(st),this.endGeometry(i)}},r.prototype.drawMultiLineString=function(t,i){var e=this.state,a=e.strokeStyle,n=e.lineWidth;if(!(a===void 0||n===void 0)){this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(t,i),this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],ht);for(var s=t.getEnds(),o=t.getFlatCoordinates(),h=t.getStride(),f=0,u=0,c=s.length;u<c;++u)f=this.drawFlatCoordinates_(o,f,s[u],h);this.hitDetectionInstructions.push(st),this.endGeometry(i)}},r.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(st),this.reverseHitDetectionInstructions(),this.state=null,l.prototype.finish.call(this)},r.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(st),t.lastStroke=this.coordinates.length),t.lastStroke=0,l.prototype.applyStroke.call(this,t),this.instructions.push(ht)},r}(Dt),fr=lr,ur=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),cr=function(l){ur(r,l);function r(t,i,e,a){return l.call(this,t,i,e,a)||this}return r.prototype.drawFlatCoordinatess_=function(t,i,e,a){var n=this.state,s=n.fillStyle!==void 0,o=n.strokeStyle!==void 0,h=e.length;this.instructions.push(ht),this.hitDetectionInstructions.push(ht);for(var f=0;f<h;++f){var u=e[f],c=this.coordinates.length,_=this.appendFlatLineCoordinates(t,i,u,a,!0,!o),v=[y.MOVE_TO_LINE_TO,c,_];this.instructions.push(v),this.hitDetectionInstructions.push(v),o&&(this.instructions.push(Ye),this.hitDetectionInstructions.push(Ye)),i=u}return s&&(this.instructions.push(Xt),this.hitDetectionInstructions.push(Xt)),o&&(this.instructions.push(st),this.hitDetectionInstructions.push(st)),i},r.prototype.drawCircle=function(t,i){var e=this.state,a=e.fillStyle,n=e.strokeStyle;if(!(a===void 0&&n===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,lt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var s=t.getFlatCoordinates(),o=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,o,!1,!1);var f=[y.CIRCLE,h];this.instructions.push(ht,f),this.hitDetectionInstructions.push(ht,f),e.fillStyle!==void 0&&(this.instructions.push(Xt),this.hitDetectionInstructions.push(Xt)),e.strokeStyle!==void 0&&(this.instructions.push(st),this.hitDetectionInstructions.push(st)),this.endGeometry(i)}},r.prototype.drawPolygon=function(t,i){var e=this.state,a=e.fillStyle,n=e.strokeStyle;if(!(a===void 0&&n===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,lt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);var s=t.getEnds(),o=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(o,0,s,h),this.endGeometry(i)}},r.prototype.drawMultiPolygon=function(t,i){var e=this.state,a=e.fillStyle,n=e.strokeStyle;if(!(a===void 0&&n===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,i),e.fillStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_FILL_STYLE,lt]),e.strokeStyle!==void 0&&this.hitDetectionInstructions.push([y.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);for(var s=t.getEndss(),o=t.getOrientedFlatCoordinates(),h=t.getStride(),f=0,u=0,c=s.length;u<c;++u)f=this.drawFlatCoordinatess_(o,f,s[u],h);this.endGeometry(i)}},r.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var i=this.coordinates,e=0,a=i.length;e<a;++e)i[e]=mi(i[e],t);return l.prototype.finish.call(this)},r.prototype.setFillStrokeStyles_=function(){var t=this.state,i=t.fillStyle;i!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},r}(Dt),Xe=cr;function _r(l,r,t,i,e){var a=t,n=t,s=0,o=0,h=t,f,u,c,_,v,d,g,m,x,S;for(u=t;u<i;u+=e){var C=r[u],O=r[u+1];v!==void 0&&(x=C-v,S=O-d,_=Math.sqrt(x*x+S*S),g!==void 0&&(o+=c,f=Math.acos((g*x+m*S)/(c*_)),f>l&&(o>s&&(s=o,a=h,n=u),o=0,h=u-e)),c=_,g=x,m=S),v=C,d=O}return o+=_,o>s?[h,u]:[a,n]}var vr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qt={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},dr=function(l){vr(r,l);function r(t,i,e,a){var n=l.call(this,t,i,e,a)||this;return n.labels_=null,n.text_="",n.textOffsetX_=0,n.textOffsetY_=0,n.textRotateWithView_=void 0,n.textRotation_=0,n.textFillState_=null,n.fillStates={},n.textStrokeState_=null,n.strokeStates={},n.textState_={},n.textStates={},n.textKey_="",n.fillKey_="",n.strokeKey_="",n.declutterImageWithText_=void 0,n}return r.prototype.finish=function(){var t=l.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},r.prototype.drawText=function(t,i){var e=this.textFillState_,a=this.textStrokeState_,n=this.textState_;if(!(this.text_===""||!n||!e&&!a)){var s=this.coordinates,o=s.length,h=t.getType(),f=null,u=t.getStride();if(n.placement===er.LINE&&(h==R.LINE_STRING||h==R.MULTI_LINE_STRING||h==R.POLYGON||h==R.MULTI_POLYGON)){if(!Z(this.getBufferedMaxExtent(),t.getExtent()))return;var c=void 0;if(f=t.getFlatCoordinates(),h==R.LINE_STRING)c=[f.length];else if(h==R.MULTI_LINE_STRING)c=t.getEnds();else if(h==R.POLYGON)c=t.getEnds().slice(0,1);else if(h==R.MULTI_POLYGON){var _=t.getEndss();c=[];for(var v=0,d=_.length;v<d;++v)c.push(_[v][0])}this.beginGeometry(t,i);for(var g=n.textAlign,m=0,x=void 0,S=0,C=c.length;S<C;++S){if(g==null){var O=_r(n.maxAngle,f,m,c[S],u);m=O[0],x=O[1]}else x=c[S];for(var v=m;v<x;v+=u)s.push(f[v],f[v+1]);var I=s.length;m=c[S],this.drawChars_(o,I),o=I}this.endGeometry(i)}else{var E=n.overflow?null:[];switch(h){case R.POINT:case R.MULTI_POINT:f=t.getFlatCoordinates();break;case R.LINE_STRING:f=t.getFlatMidpoint();break;case R.CIRCLE:f=t.getCenter();break;case R.MULTI_LINE_STRING:f=t.getFlatMidpoints(),u=2;break;case R.POLYGON:f=t.getFlatInteriorPoint(),n.overflow||E.push(f[2]/this.resolution),u=3;break;case R.MULTI_POLYGON:var T=t.getFlatInteriorPoints();f=[];for(var v=0,d=T.length;v<d;v+=3)n.overflow||E.push(T[v+2]/this.resolution),f.push(T[v],T[v+1]);if(f.length===0)return;u=2;break}var I=this.appendFlatPointCoordinates(f,u);if(I===o)return;if(E&&(I-o)/2!==f.length/u){var w=o/2;E=E.filter(function(N,A){var G=s[(w+A)*2]===f[A*u]&&s[(w+A)*2+1]===f[A*u+1];return G||--w,G})}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,i);var k=n.padding;if(k!=ot&&(n.scale[0]<0||n.scale[1]<0)){var P=n.padding[0],D=n.padding[1],L=n.padding[2],F=n.padding[3];n.scale[0]<0&&(D=-D,F=-F),n.scale[1]<0&&(P=-P,L=-L),k=[P,D,L,F]}var b=this.pixelRatio;this.instructions.push([y.DRAW_IMAGE,o,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,k==ot?ot:k.map(function(N){return N*b}),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);var W=1/b;this.hitDetectionInstructions.push([y.DRAW_IMAGE,o,I,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[W,W],NaN,this.declutterImageWithText_,k,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),this.endGeometry(i)}}},r.prototype.saveTextStates_=function(){var t=this.textStrokeState_,i=this.textState_,e=this.textFillState_,a=this.strokeKey_;t&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var n=this.textKey_;n in this.textStates||(this.textStates[n]={font:i.font,textAlign:i.textAlign||Et,textBaseline:i.textBaseline||Zt,scale:i.scale});var s=this.fillKey_;e&&(s in this.fillStates||(this.fillStates[s]={fillStyle:e.fillStyle}))},r.prototype.drawChars_=function(t,i){var e=this.textStrokeState_,a=this.textState_,n=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,f=qt[a.textBaseline],u=this.textOffsetY_*h,c=this.text_,_=e?e.lineWidth*Math.abs(a.scale[0])/2:0;this.instructions.push([y.DRAW_CHARS,t,i,f,a.overflow,o,a.maxAngle,h,u,n,_*h,c,s,1]),this.hitDetectionInstructions.push([y.DRAW_CHARS,t,i,f,a.overflow,o,a.maxAngle,1,u,n,_,c,s,1/h])},r.prototype.setTextStyle=function(t,i){var e,a,n;if(!t)this.text_="";else{var s=t.getFill();s?(a=this.textFillState_,a||(a={},this.textFillState_=a),a.fillStyle=at(s.getColor()||lt)):(a=null,this.textFillState_=a);var o=t.getStroke();if(!o)n=null,this.textStrokeState_=n;else{n=this.textStrokeState_,n||(n={},this.textStrokeState_=n);var h=o.getLineDash(),f=o.getLineDashOffset(),u=o.getWidth(),c=o.getMiterLimit();n.lineCap=o.getLineCap()||jt,n.lineDash=h?h.slice():Ot,n.lineDashOffset=f===void 0?Ct:f,n.lineJoin=o.getLineJoin()||Ht,n.lineWidth=u===void 0?Vt:u,n.miterLimit=c===void 0?zt:c,n.strokeStyle=at(o.getColor()||Ut)}e=this.textState_;var _=t.getFont()||Ze;Si(_);var v=t.getScaleArray();e.overflow=t.getOverflow(),e.font=_,e.maxAngle=t.getMaxAngle(),e.placement=t.getPlacement(),e.textAlign=t.getTextAlign(),e.textBaseline=t.getTextBaseline()||Zt,e.backgroundFill=t.getBackgroundFill(),e.backgroundStroke=t.getBackgroundStroke(),e.padding=t.getPadding()||ot,e.scale=v===void 0?[1,1]:v;var d=t.getOffsetX(),g=t.getOffsetY(),m=t.getRotateWithView(),x=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=d===void 0?0:d,this.textOffsetY_=g===void 0?0:g,this.textRotateWithView_=m===void 0?!1:m,this.textRotation_=x===void 0?0:x,this.strokeKey_=n?(typeof n.strokeStyle=="string"?n.strokeStyle:vt(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=e.font+e.scale+(e.textAlign||"?")+(e.textBaseline||"?"),this.fillKey_=a?typeof a.fillStyle=="string"?a.fillStyle:"|"+vt(a.fillStyle):""}this.declutterImageWithText_=i},r}(Dt),gr=dr,pr={Circle:Xe,Default:Dt,Image:or,LineString:fr,Polygon:Xe,Text:gr},xr=function(){function l(r,t,i,e){this.tolerance_=r,this.maxExtent_=t,this.pixelRatio_=e,this.resolution_=i,this.buildersByZIndex_={}}return l.prototype.finish=function(){var r={};for(var t in this.buildersByZIndex_){r[t]=r[t]||{};var i=this.buildersByZIndex_[t];for(var e in i){var a=i[e].finish();r[t][e]=a}}return r},l.prototype.getBuilder=function(r,t){var i=r!==void 0?r.toString():"0",e=this.buildersByZIndex_[i];e===void 0&&(e={},this.buildersByZIndex_[i]=e);var a=e[t];if(a===void 0){var n=pr[t];a=new n(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),e[t]=a}return a},l}(),Ue=xr,B={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function mr(l,r,t,i,e,a,n,s,o,h,f,u){var c=l[r],_=l[r+1],v=0,d=0,g=0,m=0;function x(){v=c,d=_,r+=i,c=l[r],_=l[r+1],m+=g,g=Math.sqrt((c-v)*(c-v)+(_-d)*(_-d))}do x();while(r<t-i&&m+g<a);for(var S=g===0?0:(a-m)/g,C=ut(v,c,S),O=ut(d,_,S),I=r-i,E=m,T=a+s*o(h,e,f);r<t-i&&m+g<T;)x();S=g===0?0:(T-m)/g;var w=ut(v,c,S),k=ut(d,_,S),P;if(u){var D=[C,O,w,k];Ii(D,0,4,2,u,D,D),P=D[0]>D[2]}else P=C>w;var L=Math.PI,F=[],b=I+i===r;r=I,g=0,m=E,c=l[r],_=l[r+1];var W;if(b){x(),W=Math.atan2(_-d,c-v),P&&(W+=W>0?-L:L);var M=(w+C)/2,N=(k+O)/2;return F[0]=[M,N,(T-a)/2,W,e],F}for(var A=0,G=e.length;A<G;){x();var Y=Math.atan2(_-d,c-v);if(P&&(Y+=Y>0?-L:L),W!==void 0){var p=Y-W;if(p+=p>L?-2*L:p<-L?2*L:0,Math.abs(p)>n)return null}W=Y;for(var X=A,U=0;A<G;++A){var tt=P?G-A-1:A,ft=s*o(h,e[tt],f);if(r+i<t&&m+g<a+U+ft/2)break;U+=ft}if(A!==X){var te=P?e.substring(G-X,G-A):e.substring(X,A);S=g===0?0:(a+U/2-m)/g;var M=ut(v,c,S),N=ut(d,_,S);F.push([M,N,U/2,Y,te]),a+=U}}return F}var ct=$t(),it=[],q=[],Q=[],rt=[];function je(l){return l[3].declutterBox}var Sr=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function He(l,r){return(r==="start"||r==="end")&&!Sr.test(l)&&(r=r==="start"?"left":"right"),qt[r]}function Ir(l,r,t){return t>0&&l.push(`
`,""),l.push(r,""),l}var yr=function(){function l(r,t,i,e){this.overlaps=i,this.pixelRatio=t,this.resolution=r,this.alignFill_,this.instructions=e.instructions,this.coordinates=e.coordinates,this.coordinateCache_={},this.renderedTransform_=Jt(),this.hitDetectionInstructions=e.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=e.fillStates||{},this.strokeStates=e.strokeStates||{},this.textStates=e.textStates||{},this.widths_={},this.labels_={}}return l.prototype.createLabel=function(r,t,i,e){var a=r+t+i+e;if(this.labels_[a])return this.labels_[a];var n=e?this.strokeStates[e]:null,s=i?this.fillStates[i]:null,o=this.textStates[t],h=this.pixelRatio,f=[o.scale[0]*h,o.scale[1]*h],u=Array.isArray(r),c=He(u?r[0]:r,o.textAlign||Et),_=e&&n.lineWidth?n.lineWidth:0,v=u?r:r.split(`
`).reduce(Ir,[]),d=yi(o,v),g=d.width,m=d.height,x=d.widths,S=d.heights,C=d.lineWidths,O=g+_,I=[],E=(O+2)*f[0],T=(m+_)*f[1],w={width:E<0?Math.floor(E):Math.ceil(E),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:I};if((f[0]!=1||f[1]!=1)&&I.push("scale",f),e){I.push("strokeStyle",n.strokeStyle),I.push("lineWidth",_),I.push("lineCap",n.lineCap),I.push("lineJoin",n.lineJoin),I.push("miterLimit",n.miterLimit);var k=Ti?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;k.prototype.setLineDash&&(I.push("setLineDash",[n.lineDash]),I.push("lineDashOffset",n.lineDashOffset))}i&&I.push("fillStyle",s.fillStyle),I.push("textBaseline","middle"),I.push("textAlign","center");for(var P=.5-c,D=c*O+P*_,L=[],F=[],b=0,W=0,M=0,N=0,A,G=0,Y=v.length;G<Y;G+=2){var p=v[G];if(p===`
`){W+=b,b=0,D=c*O+P*_,++N;continue}var X=v[G+1]||o.font;X!==A&&(e&&L.push("font",X),i&&F.push("font",X),A=X),b=Math.max(b,S[M]);var U=[p,D+P*x[M]+c*(x[M]-C[N]),.5*(_+b)+W];D+=x[M],e&&L.push("strokeText",U),i&&F.push("fillText",U),++M}return Array.prototype.push.apply(I,L),Array.prototype.push.apply(I,F),this.labels_[a]=w,w},l.prototype.replayTextBackground_=function(r,t,i,e,a,n,s){r.beginPath(),r.moveTo.apply(r,t),r.lineTo.apply(r,i),r.lineTo.apply(r,e),r.lineTo.apply(r,a),r.lineTo.apply(r,t),n&&(this.alignFill_=n[2],this.fill_(r)),s&&(this.setStrokeStyle_(r,s),r.stroke())},l.prototype.calculateImageOrLabelDimensions_=function(r,t,i,e,a,n,s,o,h,f,u,c,_,v,d,g){s*=c[0],o*=c[1];var m=i-s,x=e-o,S=a+h>r?r-h:a,C=n+f>t?t-f:n,O=v[3]+S*c[0]+v[1],I=v[0]+C*c[1]+v[2],E=m-v[3],T=x-v[0];(d||u!==0)&&(it[0]=E,rt[0]=E,it[1]=T,q[1]=T,q[0]=E+O,Q[0]=q[0],Q[1]=T+I,rt[1]=Q[1]);var w;return u!==0?(w=Kt(Jt(),i,e,1,1,u,-i,-e),_t(w,it),_t(w,q),_t(w,Q),_t(w,rt),Ge(Math.min(it[0],q[0],Q[0],rt[0]),Math.min(it[1],q[1],Q[1],rt[1]),Math.max(it[0],q[0],Q[0],rt[0]),Math.max(it[1],q[1],Q[1],rt[1]),ct)):Ge(Math.min(E,E+O),Math.min(T,T+I),Math.max(E,E+O),Math.max(T,T+I),ct),_&&(m=Math.round(m),x=Math.round(x)),{drawImageX:m,drawImageY:x,drawImageW:S,drawImageH:C,originX:h,originY:f,declutterBox:{minX:ct[0],minY:ct[1],maxX:ct[2],maxY:ct[3],value:g},canvasTransform:w,scale:c}},l.prototype.replayImageOrLabel_=function(r,t,i,e,a,n,s){var o=!!(n||s),h=e.declutterBox,f=r.canvas,u=s?s[2]*e.scale[0]/2:0,c=h.minX-u<=f.width/t&&h.maxX+u>=0&&h.minY-u<=f.height/t&&h.maxY+u>=0;return c&&(o&&this.replayTextBackground_(r,it,q,Q,rt,n,s),Oi(r,e.canvasTransform,a,i,e.originX,e.originY,e.drawImageW,e.drawImageH,e.drawImageX,e.drawImageY,e.scale)),!0},l.prototype.fill_=function(r){if(this.alignFill_){var t=_t(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;r.save(),r.translate(t[0]%i,t[1]%i),r.rotate(this.viewRotation_)}r.fill(),this.alignFill_&&r.restore()},l.prototype.setStrokeStyle_=function(r,t){r.strokeStyle=t[1],r.lineWidth=t[2],r.lineCap=t[3],r.lineJoin=t[4],r.miterLimit=t[5],r.setLineDash&&(r.lineDashOffset=t[7],r.setLineDash(t[6]))},l.prototype.drawLabelWithPointPlacement_=function(r,t,i,e){var a=this.textStates[t],n=this.createLabel(r,t,e,i),s=this.strokeStates[i],o=this.pixelRatio,h=He(Array.isArray(r)?r[0]:r,a.textAlign||Et),f=qt[a.textBaseline||Zt],u=s&&s.lineWidth?s.lineWidth:0,c=n.width/o-2*a.scale[0],_=h*c+2*(.5-h)*u,v=f*n.height/o+2*(.5-f)*u;return{label:n,anchorX:_,anchorY:v}},l.prototype.execute_=function(r,t,i,e,a,n,s,o){var h;this.pixelCoordinates_&&Qt(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Tt(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),Ci(this.renderedTransform_,i));for(var f=0,u=e.length,c=0,_,v,d,g,m,x,S,C,O,I,E,T,w=0,k=0,P=null,D=null,L=this.coordinateCache_,F=this.viewRotation_,b=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,W={context:r,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},M=this.instructions!=e||this.overlaps?0:200,N,A,G,Y;f<u;){var p=e[f],X=p[0];switch(X){case y.BEGIN_GEOMETRY:N=p[1],Y=p[3],N.getGeometry()?s!==void 0&&!Z(s,Y.getExtent())?f=p[2]+1:++f:f=p[2];break;case y.BEGIN_PATH:w>M&&(this.fill_(r),w=0),k>M&&(r.stroke(),k=0),!w&&!k&&(r.beginPath(),g=NaN,m=NaN),++f;break;case y.CIRCLE:c=p[1];var U=h[c],tt=h[c+1],ft=h[c+2],te=h[c+3],Se=ft-U,Ie=te-tt,ye=Math.sqrt(Se*Se+Ie*Ie);r.moveTo(U+ye,tt),r.arc(U,tt,ye,0,2*Math.PI,!0),++f;break;case y.CLOSE_PATH:r.closePath(),++f;break;case y.CUSTOM:c=p[1],_=p[2];var ti=p[3],ei=p[4],Te=p.length==6?p[5]:void 0;W.geometry=ti,W.feature=N,f in L||(L[f]=[]);var dt=L[f];Te?Te(h,c,_,2,dt):(dt[0]=h[c],dt[1]=h[c+1],dt.length=2),ei(dt,W),++f;break;case y.DRAW_IMAGE:c=p[1],_=p[2],C=p[3],v=p[4],d=p[5];var ee=p[6],ii=p[7],ri=p[8],ni=p[9],Oe=p[10],ie=p[11],ai=p[12],kt=p[13],gt=p[14];if(!C&&p.length>=19){O=p[18],I=p[19],E=p[20],T=p[21];var re=this.drawLabelWithPointPlacement_(O,I,E,T);C=re.label,p[3]=C;var si=p[22];v=(re.anchorX-si)*this.pixelRatio,p[4]=v;var oi=p[23];d=(re.anchorY-oi)*this.pixelRatio,p[5]=d,ee=C.height,p[6]=ee,kt=C.width,p[13]=kt}var ne=void 0;p.length>24&&(ne=p[24]);var ae=void 0,Ft=void 0,Pt=void 0;p.length>16?(ae=p[15],Ft=p[16],Pt=p[17]):(ae=ot,Ft=!1,Pt=!1),Oe&&b?ie+=F:!Oe&&!b&&(ie-=F);for(var hi=0;c<_;c+=2)if(!(ne&&ne[hi++]<kt/this.pixelRatio)){var K=this.calculateImageOrLabelDimensions_(C.width,C.height,h[c],h[c+1],kt,ee,v,d,ri,ni,ie,ai,a,ae,Ft||Pt,N),Ce=[r,t,C,K,ii,Ft?P:null,Pt?D:null],Mt=void 0,se=void 0;if(o&&gt){var At=_-c;if(!gt[At]){gt[At]=Ce;continue}if(Mt=gt[At],delete gt[At],se=je(Mt),o.collides(se))continue}o&&o.collides(K.declutterBox)||(Mt&&(o&&o.insert(se),this.replayImageOrLabel_.apply(this,Mt)),o&&o.insert(K.declutterBox),this.replayImageOrLabel_.apply(this,Ce))}++f;break;case y.DRAW_CHARS:var Ee=p[1],we=p[2],oe=p[3],li=p[4];T=p[5];var fi=p[6],Le=p[7],Re=p[8];E=p[9];var he=p[10];O=p[11],I=p[12];var De=[p[13],p[13]],le=this.textStates[I],pt=le.font,xt=[le.scale[0]*Le,le.scale[1]*Le],mt=void 0;pt in this.widths_?mt=this.widths_[pt]:(mt={},this.widths_[pt]=mt);var ke=tr(h,Ee,we,2),Fe=Math.abs(xt[0])*Ne(pt,O,mt);if(li||Fe<=ke){var ui=this.textStates[I].textAlign,ci=(ke-Fe)*qt[ui],St=mr(h,Ee,we,2,O,ci,fi,Math.abs(xt[0]),Ne,pt,mt,b?0:this.viewRotation_);t:if(St){var It=[],et=void 0,Gt=void 0,Nt=void 0,j=void 0,V=void 0;if(E)for(et=0,Gt=St.length;et<Gt;++et){V=St[et],Nt=V[4],j=this.createLabel(Nt,I,"",E),v=V[2]+(xt[0]<0?-he:he),d=oe*j.height+(.5-oe)*2*he*xt[1]/xt[0]-Re;var K=this.calculateImageOrLabelDimensions_(j.width,j.height,V[0],V[1],j.width,j.height,v,d,0,0,V[3],De,!1,ot,!1,N);if(o&&o.collides(K.declutterBox))break t;It.push([r,t,j,K,1,null,null])}if(T)for(et=0,Gt=St.length;et<Gt;++et){V=St[et],Nt=V[4],j=this.createLabel(Nt,I,T,""),v=V[2],d=oe*j.height-Re;var K=this.calculateImageOrLabelDimensions_(j.width,j.height,V[0],V[1],j.width,j.height,v,d,0,0,V[3],De,!1,ot,!1,N);if(o&&o.collides(K.declutterBox))break t;It.push([r,t,j,K,1,null,null])}o&&o.load(It.map(je));for(var fe=0,_i=It.length;fe<_i;++fe)this.replayImageOrLabel_.apply(this,It[fe])}}++f;break;case y.END_GEOMETRY:if(n!==void 0){N=p[1];var Pe=n(N,Y);if(Pe)return Pe}++f;break;case y.FILL:M?w++:this.fill_(r),++f;break;case y.MOVE_TO_LINE_TO:for(c=p[1],_=p[2],A=h[c],G=h[c+1],x=A+.5|0,S=G+.5|0,(x!==g||S!==m)&&(r.moveTo(A,G),g=x,m=S),c+=2;c<_;c+=2)A=h[c],G=h[c+1],x=A+.5|0,S=G+.5|0,(c==_-2||x!==g||S!==m)&&(r.lineTo(A,G),g=x,m=S);++f;break;case y.SET_FILL_STYLE:P=p,this.alignFill_=p[2],w&&(this.fill_(r),w=0,k&&(r.stroke(),k=0)),r.fillStyle=p[1],++f;break;case y.SET_STROKE_STYLE:D=p,k&&(r.stroke(),k=0),this.setStrokeStyle_(r,p),++f;break;case y.STROKE:M?k++:r.stroke(),++f;break;default:++f;break}}w&&this.fill_(r),k&&r.stroke()},l.prototype.execute=function(r,t,i,e,a,n){this.viewRotation_=e,this.execute_(r,t,i,this.instructions,a,void 0,void 0,n)},l.prototype.executeHitDetection=function(r,t,i,e,a){return this.viewRotation_=i,this.execute_(r,1,t,this.hitDetectionInstructions,!0,e,a)},l}(),Tr=yr,ce=[B.POLYGON,B.CIRCLE,B.LINE_STRING,B.IMAGE,B.TEXT,B.DEFAULT],Or=function(){function l(r,t,i,e,a,n){this.maxExtent_=r,this.overlaps_=e,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Jt(),this.createExecutors_(a)}return l.prototype.clip=function(r,t){var i=this.getClipCoords(t);r.beginPath(),r.moveTo(i[0],i[1]),r.lineTo(i[2],i[3]),r.lineTo(i[4],i[5]),r.lineTo(i[6],i[7]),r.clip()},l.prototype.createExecutors_=function(r){for(var t in r){var i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);var e=r[t];for(var a in e){var n=e[a];i[a]=new Tr(this.resolution_,this.pixelRatio_,this.overlaps_,n)}}},l.prototype.hasExecutors=function(r){for(var t in this.executorsByZIndex_)for(var i=this.executorsByZIndex_[t],e=0,a=r.length;e<a;++e)if(r[e]in i)return!0;return!1},l.prototype.forEachFeatureAtCoordinate=function(r,t,i,e,a,n){e=Math.round(e);var s=e*2+1,o=Kt(this.hitDetectionTransform_,e+.5,e+.5,1/t,-1/t,-i,-r[0],-r[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=wt(s,s));var f=this.hitDetectionContext_;f.canvas.width!==s||f.canvas.height!==s?(f.canvas.width=s,f.canvas.height=s):h||f.clearRect(0,0,s,s);var u;this.renderBuffer_!==void 0&&(u=$t(),Ei(u,r),pe(u,t*(this.renderBuffer_+e),u));var c=Cr(e),_;function v(I,E){for(var T=f.getImageData(0,0,s,s).data,w=0,k=c.length;w<k;w++)if(T[c[w]]>0){if(!n||_!==B.IMAGE&&_!==B.TEXT||n.indexOf(I)!==-1){var P=(c[w]-3)/4,D=e-P%s,L=e-(P/s|0),F=a(I,E,D*D+L*L);if(F)return F}f.clearRect(0,0,s,s);break}}var d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(ve);var g,m,x,S,C;for(g=d.length-1;g>=0;--g){var O=d[g].toString();for(x=this.executorsByZIndex_[O],m=ce.length-1;m>=0;--m)if(_=ce[m],S=x[_],S!==void 0&&(C=S.executeHitDetection(f,o,i,v,u),C))return C}},l.prototype.getClipCoords=function(r){var t=this.maxExtent_;if(!t)return null;var i=t[0],e=t[1],a=t[2],n=t[3],s=[i,e,i,n,a,n,a,e];return Tt(s,0,8,2,r,s),s},l.prototype.isEmpty=function(){return wi(this.executorsByZIndex_)},l.prototype.execute=function(r,t,i,e,a,n,s){var o=Object.keys(this.executorsByZIndex_).map(Number);o.sort(ve),this.maxExtent_&&(r.save(),this.clip(r,i));var h=n||ce,f,u,c,_,v,d;for(s&&o.reverse(),f=0,u=o.length;f<u;++f){var g=o[f].toString();for(v=this.executorsByZIndex_[g],c=0,_=h.length;c<_;++c){var m=h[c];d=v[m],d!==void 0&&d.execute(r,t,i,e,a,s)}}this.maxExtent_&&r.restore()},l}(),_e={};function Cr(l){if(_e[l]!==void 0)return _e[l];for(var r=l*2+1,t=l*l,i=new Array(t+1),e=0;e<=l;++e)for(var a=0;a<=l;++a){var n=e*e+a*a;if(n>t)break;var s=i[n];s||(s=[],i[n]=s),s.push(((l+e)*r+(l+a))*4+3),e>0&&s.push(((l-e)*r+(l+a))*4+3),a>0&&(s.push(((l+e)*r+(l-a))*4+3),e>0&&s.push(((l-e)*r+(l-a))*4+3))}for(var o=[],e=0,h=i.length;e<h;++e)i[e]&&o.push.apply(o,i[e]);return _e[l]=o,o}var Ve=Or,Er=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),wr=function(l){Er(r,l);function r(t,i,e,a,n,s,o){var h=l.call(this)||this;return h.context_=t,h.pixelRatio_=i,h.extent_=e,h.transform_=a,h.viewRotation_=n,h.squaredTolerance_=s,h.userTransform_=o,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=Jt(),h}return r.prototype.drawImages_=function(t,i,e,a){if(!!this.image_){var n=Tt(t,i,e,a,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,h=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;this.imageRotateWithView_&&(f+=this.viewRotation_);for(var u=0,c=n.length;u<c;u+=2){var _=n[u]-this.imageAnchorX_,v=n[u+1]-this.imageAnchorY_;if(f!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var d=_+this.imageAnchorX_,g=v+this.imageAnchorY_;Kt(o,d,g,1,1,f,-d,-g),s.setTransform.apply(s,o),s.translate(d,g),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,v,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=h)}},r.prototype.drawText_=function(t,i,e,a){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=Tt(t,i,e,a,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);i<e;i+=a){var h=n[i]+this.textOffsetX_,f=n[i+1]+this.textOffsetY_;if(o!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var u=Kt(this.tmpLocalTransform_,h,f,1,1,o,-h,-f);s.setTransform.apply(s,u),s.translate(h,f),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&s.strokeText(this.text_,h,f),this.textFillState_&&s.fillText(this.text_,h,f)}}},r.prototype.moveToLineTo_=function(t,i,e,a,n){var s=this.context_,o=Tt(t,i,e,a,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);var h=o.length;n&&(h-=2);for(var f=2;f<h;f+=2)s.lineTo(o[f],o[f+1]);return n&&s.closePath(),e},r.prototype.drawRings_=function(t,i,e,a){for(var n=0,s=e.length;n<s;++n)i=this.moveToLineTo_(t,i,e[n],a,!0);return i},r.prototype.drawCircle=function(t){if(!!Z(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=Li(t,this.transform_,this.pixelCoordinates_),e=i[2]-i[0],a=i[3]-i[1],n=Math.sqrt(e*e+a*a),s=this.context_;s.beginPath(),s.arc(i[0],i[1],n,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},r.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},r.prototype.setTransform=function(t){this.transform_=t},r.prototype.drawGeometry=function(t){var i=t.getType();switch(i){case R.POINT:this.drawPoint(t);break;case R.LINE_STRING:this.drawLineString(t);break;case R.POLYGON:this.drawPolygon(t);break;case R.MULTI_POINT:this.drawMultiPoint(t);break;case R.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case R.MULTI_POLYGON:this.drawMultiPolygon(t);break;case R.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case R.CIRCLE:this.drawCircle(t);break}},r.prototype.drawFeature=function(t,i){var e=i.getGeometryFunction()(t);!e||!Z(this.extent_,e.getExtent())||(this.setStyle(i),this.drawGeometry(e))},r.prototype.drawGeometryCollection=function(t){for(var i=t.getGeometriesArray(),e=0,a=i.length;e<a;++e)this.drawGeometry(i[e])},r.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),this.text_!==""&&this.drawText_(i,0,i.length,e)},r.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getFlatCoordinates(),e=t.getStride();this.image_&&this.drawImages_(i,0,i.length,e),this.text_!==""&&this.drawText_(i,0,i.length,e)},r.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getFlatCoordinates();i.beginPath(),this.moveToLineTo_(e,0,e.length,t.getStride(),!1),i.stroke()}if(this.text_!==""){var a=t.getFlatMidpoint();this.drawText_(a,0,2,2)}}},r.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var i=t.getExtent();if(!!Z(this.extent_,i)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,a=t.getFlatCoordinates(),n=0,s=t.getEnds(),o=t.getStride();e.beginPath();for(var h=0,f=s.length;h<f;++h)n=this.moveToLineTo_(a,n,s[h],o,!1);e.stroke()}if(this.text_!==""){var u=t.getFlatMidpoints();this.drawText_(u,0,u.length,2)}}},r.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_;i.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},r.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Z(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var i=this.context_,e=t.getOrientedFlatCoordinates(),a=0,n=t.getEndss(),s=t.getStride();i.beginPath();for(var o=0,h=n.length;o<h;++o){var f=n[o];a=this.drawRings_(e,a,f,s)}this.fillState_&&i.fill(),this.strokeState_&&i.stroke()}if(this.text_!==""){var u=t.getFlatInteriorPoints();this.drawText_(u,0,u.length,2)}}},r.prototype.setContextFillState_=function(t){var i=this.context_,e=this.contextFillState_;e?e.fillStyle!=t.fillStyle&&(e.fillStyle=t.fillStyle,i.fillStyle=t.fillStyle):(i.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},r.prototype.setContextStrokeState_=function(t){var i=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=t.lineCap&&(e.lineCap=t.lineCap,i.lineCap=t.lineCap),i.setLineDash&&(Qt(e.lineDash,t.lineDash)||i.setLineDash(e.lineDash=t.lineDash),e.lineDashOffset!=t.lineDashOffset&&(e.lineDashOffset=t.lineDashOffset,i.lineDashOffset=t.lineDashOffset)),e.lineJoin!=t.lineJoin&&(e.lineJoin=t.lineJoin,i.lineJoin=t.lineJoin),e.lineWidth!=t.lineWidth&&(e.lineWidth=t.lineWidth,i.lineWidth=t.lineWidth),e.miterLimit!=t.miterLimit&&(e.miterLimit=t.miterLimit,i.miterLimit=t.miterLimit),e.strokeStyle!=t.strokeStyle&&(e.strokeStyle=t.strokeStyle,i.strokeStyle=t.strokeStyle)):(i.lineCap=t.lineCap,i.setLineDash&&(i.setLineDash(t.lineDash),i.lineDashOffset=t.lineDashOffset),i.lineJoin=t.lineJoin,i.lineWidth=t.lineWidth,i.miterLimit=t.miterLimit,i.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},r.prototype.setContextTextState_=function(t){var i=this.context_,e=this.contextTextState_,a=t.textAlign?t.textAlign:Et;e?(e.font!=t.font&&(e.font=t.font,i.font=t.font),e.textAlign!=a&&(e.textAlign=a,i.textAlign=a),e.textBaseline!=t.textBaseline&&(e.textBaseline=t.textBaseline,i.textBaseline=t.textBaseline)):(i.font=t.font,i.textAlign=a,i.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})},r.prototype.setFillStrokeStyle=function(t,i){var e=this;if(!t)this.fillState_=null;else{var a=t.getColor();this.fillState_={fillStyle:at(a||lt)}}if(!i)this.strokeState_=null;else{var n=i.getColor(),s=i.getLineCap(),o=i.getLineDash(),h=i.getLineDashOffset(),f=i.getLineJoin(),u=i.getWidth(),c=i.getMiterLimit(),_=o||Ot;this.strokeState_={lineCap:s!==void 0?s:jt,lineDash:this.pixelRatio_===1?_:_.map(function(v){return v*e.pixelRatio_}),lineDashOffset:(h||Ct)*this.pixelRatio_,lineJoin:f!==void 0?f:Ht,lineWidth:(u!==void 0?u:Vt)*this.pixelRatio_,miterLimit:c!==void 0?c:zt,strokeStyle:at(n||Ut)}}},r.prototype.setImageStyle=function(t){var i;if(!t||!(i=t.getSize())){this.image_=null;return}var e=t.getAnchor(),a=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=e[0]*this.pixelRatio_,this.imageAnchorY_=e[1]*this.pixelRatio_,this.imageHeight_=i[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=i[0]*this.pixelRatio_},r.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var i=t.getFill();if(!i)this.textFillState_=null;else{var e=i.getColor();this.textFillState_={fillStyle:at(e||lt)}}var a=t.getStroke();if(!a)this.textStrokeState_=null;else{var n=a.getColor(),s=a.getLineCap(),o=a.getLineDash(),h=a.getLineDashOffset(),f=a.getLineJoin(),u=a.getWidth(),c=a.getMiterLimit();this.textStrokeState_={lineCap:s!==void 0?s:jt,lineDash:o||Ot,lineDashOffset:h||Ct,lineJoin:f!==void 0?f:Ht,lineWidth:u!==void 0?u:Vt,miterLimit:c!==void 0?c:zt,strokeStyle:at(n||Ut)}}var _=t.getFont(),v=t.getOffsetX(),d=t.getOffsetY(),g=t.getRotateWithView(),m=t.getRotation(),x=t.getScaleArray(),S=t.getText(),C=t.getTextAlign(),O=t.getTextBaseline();this.textState_={font:_!==void 0?_:Ze,textAlign:C!==void 0?C:Et,textBaseline:O!==void 0?O:Zt},this.text_=S!==void 0?Array.isArray(S)?S.reduce(function(I,E,T){return I+=T%2?" ":E},""):S:"",this.textOffsetX_=v!==void 0?this.pixelRatio_*v:0,this.textOffsetY_=d!==void 0?this.pixelRatio_*d:0,this.textRotateWithView_=g!==void 0?g:!1,this.textRotation_=m!==void 0?m:0,this.textScale_=[this.pixelRatio_*x[0],this.pixelRatio_*x[1]]}},r}(Ke),Lr=wr,nt={FRACTION:"fraction",PIXELS:"pixels"},z={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Rr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),yt=null,Dr=function(l){Rr(r,l);function r(t,i,e,a,n,s){var o=l.call(this)||this;return o.hitDetectionImage_=null,o.image_=t||new Image,a!==null&&(o.image_.crossOrigin=a),o.canvas_={},o.color_=s,o.unlisten_=null,o.imageState_=n,o.size_=e,o.src_=i,o.tainted_,o}return r.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===H.LOADED){yt||(yt=wt(1,1)),yt.drawImage(this.image_,0,0);try{yt.getImageData(0,0,1,1),this.tainted_=!1}catch{yt=null,this.tainted_=!0}}return this.tainted_===!0},r.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(de.CHANGE)},r.prototype.handleImageError_=function(){this.imageState_=H.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.handleImageLoad_=function(){this.imageState_=H.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},r.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},r.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},r.prototype.getImageState=function(){return this.imageState_},r.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],i=this.size_[1],e=wt(t,i);e.fillRect(0,0,t,i),this.hitDetectionImage_=e.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},r.prototype.getSize=function(){return this.size_},r.prototype.getSrc=function(){return this.src_},r.prototype.load=function(){if(this.imageState_==H.IDLE){this.imageState_=H.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Ri(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},r.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==H.LOADED)){var i=document.createElement("canvas");this.canvas_[t]=i,i.width=Math.ceil(this.image_.width*t),i.height=Math.ceil(this.image_.height*t);var e=i.getContext("2d");if(e.scale(t,t),e.drawImage(this.image_,0,0),e.globalCompositeOperation="multiply",e.globalCompositeOperation==="multiply"||this.isTainted_())e.fillStyle=Di(this.color_),e.fillRect(0,0,i.width/t,i.height/t),e.globalCompositeOperation="destination-in",e.drawImage(this.image_,0,0);else{for(var a=e.getImageData(0,0,i.width,i.height),n=a.data,s=this.color_[0]/255,o=this.color_[1]/255,h=this.color_[2]/255,f=this.color_[3],u=0,c=n.length;u<c;u+=4)n[u]*=s,n[u+1]*=o,n[u+2]*=h,n[u+3]*=f;e.putImageData(a,0,0)}}},r.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},r}(ki);function kr(l,r,t,i,e,a){var n=Be.get(r,i,a);return n||(n=new Dr(l,r,t,i,e,a),Be.set(r,i,a,n)),n}var Fr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pr=function(l){Fr(r,l);function r(t){var i=this,e=t||{},a=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;i=l.call(this,{opacity:a,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o})||this,i.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],i.normalizedAnchor_=null,i.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:z.TOP_LEFT,i.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:nt.FRACTION,i.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:nt.FRACTION,i.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;var h=e.img!==void 0?e.img:null;i.imgSize_=e.imgSize;var f=e.src;ue(!(f!==void 0&&h),4),ue(!h||h&&i.imgSize_,5),(f===void 0||f.length===0)&&h&&(f=h.src||vt(h)),ue(f!==void 0&&f.length>0,6);var u=e.src!==void 0?H.IDLE:H.LOADED;return i.color_=e.color!==void 0?Fi(e.color):null,i.iconImage_=kr(h,f,i.imgSize_!==void 0?i.imgSize_:null,i.crossOrigin_,u,i.color_),i.offset_=e.offset!==void 0?e.offset:[0,0],i.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:z.TOP_LEFT,i.origin_=null,i.size_=e.size!==void 0?e.size:null,i}return r.prototype.clone=function(){var t=this.getScale();return new r({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc()})},r.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var i=this.getSize();if(this.anchorXUnits_==nt.FRACTION||this.anchorYUnits_==nt.FRACTION){if(!i)return null;t=this.anchor_.slice(),this.anchorXUnits_==nt.FRACTION&&(t[0]*=i[0]),this.anchorYUnits_==nt.FRACTION&&(t[1]*=i[1])}if(this.anchorOrigin_!=z.TOP_LEFT){if(!i)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==z.TOP_RIGHT||this.anchorOrigin_==z.BOTTOM_RIGHT)&&(t[0]=-t[0]+i[0]),(this.anchorOrigin_==z.BOTTOM_LEFT||this.anchorOrigin_==z.BOTTOM_RIGHT)&&(t[1]=-t[1]+i[1])}this.normalizedAnchor_=t}var e=this.getDisplacement();return[t[0]-e[0],t[1]+e[1]]},r.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},r.prototype.getColor=function(){return this.color_},r.prototype.getImage=function(t){return this.iconImage_.getImage(t)},r.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},r.prototype.getImageSize=function(){return this.iconImage_.getSize()},r.prototype.getImageState=function(){return this.iconImage_.getImageState()},r.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},r.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=z.TOP_LEFT){var i=this.getSize(),e=this.iconImage_.getSize();if(!i||!e)return null;t=t.slice(),(this.offsetOrigin_==z.TOP_RIGHT||this.offsetOrigin_==z.BOTTOM_RIGHT)&&(t[0]=e[0]-i[0]-t[0]),(this.offsetOrigin_==z.BOTTOM_LEFT||this.offsetOrigin_==z.BOTTOM_RIGHT)&&(t[1]=e[1]-i[1]-t[1])}return this.origin_=t,this.origin_},r.prototype.getSrc=function(){return this.iconImage_.getSrc()},r.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},r.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(de.CHANGE,t)},r.prototype.load=function(){this.iconImage_.load()},r.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(de.CHANGE,t)},r}(Pi),xe=Pr,J=.5;function Mr(l,r,t,i,e,a,n){var s=l[0]*J,o=l[1]*J,h=wt(s,o);h.imageSmoothingEnabled=!1;for(var f=h.canvas,u=new Lr(h,J,e,null,n),c=t.length,_=Math.floor((256*256*256-1)/c),v={},d=1;d<=c;++d){var g=t[d-1],m=g.getStyleFunction()||i;if(!!i){var x=m(g,a);if(!!x){Array.isArray(x)||(x=[x]);for(var S=d*_,C="#"+("000000"+S.toString(16)).slice(-6),O=0,I=x.length;O<I;++O){var E=x[O],T=E.getGeometryFunction()(g);if(!(!T||!Z(e,T.getExtent()))){var w=E.clone(),k=w.getFill();k&&k.setColor(C);var P=w.getStroke();P&&(P.setColor(C),P.setLineDash(null)),w.setText(void 0);var D=E.getImage();if(D&&D.getOpacity()!==0){var L=D.getImageSize();if(!L)continue;var F=wt(L[0],L[1],void 0,{alpha:!1}),b=F.canvas;F.fillStyle=C,F.fillRect(0,0,b.width,b.height),w.setImage(new xe({img:b,imgSize:L,anchor:D.getAnchor(),anchorXUnits:nt.PIXELS,anchorYUnits:nt.PIXELS,offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}var W=w.getZIndex()||0,M=v[W];M||(M={},v[W]=M,M[R.POLYGON]=[],M[R.CIRCLE]=[],M[R.LINE_STRING]=[],M[R.POINT]=[]),M[T.getType().replace("Multi","")].push(T,w)}}}}}for(var N=Object.keys(v).map(Number).sort(ve),d=0,A=N.length;d<A;++d){var M=v[N[d]];for(var G in M)for(var Y=M[G],O=0,I=Y.length;O<I;O+=2){u.setStyle(Y[O+1]);for(var p=0,X=r.length;p<X;++p)u.setTransform(r[p]),u.drawGeometry(Y[O])}}return h.getImageData(0,0,f.width,f.height)}function Ar(l,r,t){var i=[];if(t){var e=Math.floor(Math.round(l[0])*J),a=Math.floor(Math.round(l[1])*J),n=(We(e,0,t.width-1)+We(a,0,t.height-1)*t.width)*4,s=t.data[n],o=t.data[n+1],h=t.data[n+2],f=h+256*(o+256*s),u=Math.floor((256*256*256-1)/r.length);f&&f%u===0&&i.push(r[f/u-1])}return i}var Gr=.5,$e={Point:Hr,LineString:Xr,Polygon:zr,MultiPoint:Vr,MultiLineString:Ur,MultiPolygon:jr,GeometryCollection:Yr,Circle:Wr};function Nr(l,r){return parseInt(vt(l),10)-parseInt(vt(r),10)}function Br(l,r){var t=ge(l,r);return t*t}function ge(l,r){return Gr*l/r}function Wr(l,r,t,i,e){var a=t.getFill(),n=t.getStroke();if(a||n){var s=l.getBuilder(t.getZIndex(),B.CIRCLE);s.setFillStrokeStyle(a,n),s.drawCircle(r,i)}var o=t.getText();if(o&&o.getText()){var h=(e||l).getBuilder(t.getZIndex(),B.TEXT);h.setTextStyle(o),h.drawText(r,i)}}function ze(l,r,t,i,e,a,n){var s=!1,o=t.getImage();if(o){var h=o.getImageState();h==H.LOADED||h==H.ERROR?o.unlistenImageChange(e):(h==H.IDLE&&o.load(),h=o.getImageState(),o.listenImageChange(e),s=!0)}return br(l,r,t,i,a,n),s}function br(l,r,t,i,e,a){var n=t.getGeometryFunction()(r);if(!!n){var s=n.simplifyTransformed(i,e),o=t.getRenderer();if(o)qe(l,s,t,r);else{var h=$e[s.getType()];h(l,s,t,r,a)}}}function qe(l,r,t,i){if(r.getType()==R.GEOMETRY_COLLECTION){for(var e=r.getGeometries(),a=0,n=e.length;a<n;++a)qe(l,e[a],t,i);return}var s=l.getBuilder(t.getZIndex(),B.DEFAULT);s.drawCustom(r,i,t.getRenderer(),t.getHitDetectionRenderer())}function Yr(l,r,t,i,e){var a=r.getGeometriesArray(),n,s;for(n=0,s=a.length;n<s;++n){var o=$e[a[n].getType()];o(l,a[n],t,i,e)}}function Xr(l,r,t,i,e){var a=t.getStroke();if(a){var n=l.getBuilder(t.getZIndex(),B.LINE_STRING);n.setFillStrokeStyle(null,a),n.drawLineString(r,i)}var s=t.getText();if(s&&s.getText()){var o=(e||l).getBuilder(t.getZIndex(),B.TEXT);o.setTextStyle(s),o.drawText(r,i)}}function Ur(l,r,t,i,e){var a=t.getStroke();if(a){var n=l.getBuilder(t.getZIndex(),B.LINE_STRING);n.setFillStrokeStyle(null,a),n.drawMultiLineString(r,i)}var s=t.getText();if(s&&s.getText()){var o=(e||l).getBuilder(t.getZIndex(),B.TEXT);o.setTextStyle(s),o.drawText(r,i)}}function jr(l,r,t,i,e){var a=t.getFill(),n=t.getStroke();if(n||a){var s=l.getBuilder(t.getZIndex(),B.POLYGON);s.setFillStrokeStyle(a,n),s.drawMultiPolygon(r,i)}var o=t.getText();if(o&&o.getText()){var h=(e||l).getBuilder(t.getZIndex(),B.TEXT);h.setTextStyle(o),h.drawText(r,i)}}function Hr(l,r,t,i,e){var a=t.getImage(),n=t.getText(),s;if(e&&(l=e,s=a&&n&&n.getText()?{}:void 0),a){if(a.getImageState()!=H.LOADED)return;var o=l.getBuilder(t.getZIndex(),B.IMAGE);o.setImageStyle(a,s),o.drawPoint(r,i)}if(n&&n.getText()){var h=l.getBuilder(t.getZIndex(),B.TEXT);h.setTextStyle(n,s),h.drawText(r,i)}}function Vr(l,r,t,i,e){var a=t.getImage(),n=t.getText(),s;if(e&&(l=e,s=a&&n&&n.getText()?{}:void 0),a){if(a.getImageState()!=H.LOADED)return;var o=l.getBuilder(t.getZIndex(),B.IMAGE);o.setImageStyle(a,s),o.drawMultiPoint(r,i)}if(n&&n.getText()){var h=(e||l).getBuilder(t.getZIndex(),B.TEXT);h.setTextStyle(n,s),h.drawText(r,i)}}function zr(l,r,t,i,e){var a=t.getFill(),n=t.getStroke();if(a||n){var s=l.getBuilder(t.getZIndex(),B.POLYGON);s.setFillStrokeStyle(a,n),s.drawPolygon(r,i)}var o=t.getText();if(o&&o.getText()){var h=(e||l).getBuilder(t.getZIndex(),B.TEXT);h.setTextStyle(o),h.drawText(r,i)}}var Zr=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jr=function(l){Zr(r,l);function r(t){var i=l.call(this,t)||this;return i.boundHandleStyleImageChange_=i.handleStyleImageChange_.bind(i),i.animatingOrInteracting_,i.dirty_=!1,i.hitDetectionImageData_=null,i.renderedFeatures_=null,i.renderedRevision_=-1,i.renderedResolution_=NaN,i.renderedExtent_=$t(),i.wrappedRenderedExtent_=$t(),i.renderedRotation_,i.renderedCenter_=null,i.renderedProjection_=null,i.renderedRenderOrder_=null,i.replayGroup_=null,i.replayGroupChanged=!0,i.declutterExecutorGroup=null,i.clipping=!0,i}return r.prototype.renderWorlds=function(t,i,e){var a=i.extent,n=i.viewState,s=n.center,o=n.resolution,h=n.projection,f=n.rotation,u=h.getExtent(),c=this.getLayer().getSource(),_=i.pixelRatio,v=i.viewHints,d=!(v[Wt.ANIMATING]||v[Wt.INTERACTING]),g=this.context,m=Math.round(i.size[0]*_),x=Math.round(i.size[1]*_),S=c.getWrapX()&&h.canWrapX(),C=S?bt(u):null,O=S?Math.ceil((a[2]-u[2])/C)+1:1,I=S?Math.floor((a[0]-u[0])/C):0;do{var E=this.getRenderTransform(s,o,f,_,m,x,I*C);t.execute(g,1,E,f,d,void 0,e)}while(++I<O)},r.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},r.prototype.renderFrame=function(t,i){var e=t.pixelRatio,a=t.layerStatesArray[t.layerIndex];Mi(this.pixelTransform,1/e,1/e),Ai(this.inversePixelTransform,this.pixelTransform);var n=Gi(this.pixelTransform);this.useContainer(i,n,a.opacity,this.getBackground(t));var s=this.context,o=s.canvas,h=this.replayGroup_,f=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!f||f.isEmpty()))return null;var u=Math.round(t.size[0]*e),c=Math.round(t.size[1]*e);o.width!=u||o.height!=c?(o.width=u,o.height=c,o.style.transform!==n&&(o.style.transform=n)):this.containerReused||s.clearRect(0,0,u,c),this.preRender(s,t);var _=t.viewState,v=_.projection,d=!1,g=!0;if(a.extent&&this.clipping){var m=Ni(a.extent,v);g=Z(m,t.extent),d=g&&!Yt(m,t.extent),d&&this.clipUnrotated(s,t,m)}g&&this.renderWorlds(h,t),d&&s.restore(),this.postRender(s,t);var x=Bi(a.opacity),S=this.container;return x!==S.style.opacity&&(S.style.opacity=x),this.renderedRotation_!==_.rotation&&(this.renderedRotation_=_.rotation,this.hitDetectionImageData_=null),this.container},r.prototype.getFeatures=function(t){return new Promise(function(i){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var e=[this.context.canvas.width,this.context.canvas.height];_t(this.pixelTransform,e);var a=this.renderedCenter_,n=this.renderedResolution_,s=this.renderedRotation_,o=this.renderedProjection_,h=this.wrappedRenderedExtent_,f=this.getLayer(),u=[],c=e[0]*J,_=e[1]*J;u.push(this.getRenderTransform(a,n,s,J,c,_,0).slice());var v=f.getSource(),d=o.getExtent();if(v.getWrapX()&&o.canWrapX()&&!Yt(d,h)){for(var g=h[0],m=bt(d),x=0,S=void 0;g<d[0];)--x,S=m*x,u.push(this.getRenderTransform(a,n,s,J,c,_,S).slice()),g+=m;for(x=0,g=h[2];g>d[2];)++x,S=m*x,u.push(this.getRenderTransform(a,n,s,J,c,_,S).slice()),g-=m}this.hitDetectionImageData_=Mr(e,u,this.renderedFeatures_,f.getStyleFunction(),h,n,s)}i(Ar(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},r.prototype.forEachFeatureAtCoordinate=function(t,i,e,a,n){var s=this;if(!!this.replayGroup_){var o=i.viewState.resolution,h=i.viewState.rotation,f=this.getLayer(),u={},c=function(d,g,m){var x=vt(d),S=u[x];if(S){if(S!==!0&&m<S.distanceSq){if(m===0)return u[x]=!0,n.splice(n.lastIndexOf(S),1),a(d,f,g);S.geometry=g,S.distanceSq=m}}else{if(m===0)return u[x]=!0,a(d,f,g);n.push(u[x]={feature:d,layer:f,geometry:g,distanceSq:m,callback:a})}},_,v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(function(d){return _=d.forEachFeatureAtCoordinate(t,o,h,e,c,d===s.declutterExecutorGroup&&i.declutterTree?i.declutterTree.all().map(function(g){return g.value}):null)}),_}},r.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},r.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},r.prototype.prepareFrame=function(t){var i=this.getLayer(),e=i.getSource();if(!e)return!1;var a=t.viewHints[Wt.ANIMATING],n=t.viewHints[Wt.INTERACTING],s=i.getUpdateWhileAnimating(),o=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&a||!o&&n)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,f=t.viewState,u=f.projection,c=f.resolution,_=t.pixelRatio,v=i.getRevision(),d=i.getRenderBuffer(),g=i.getRenderOrder();g===void 0&&(g=Nr);var m=f.center.slice(),x=pe(h,d*c),S=x.slice(),C=[x.slice()],O=u.getExtent();if(e.getWrapX()&&u.canWrapX()&&!Yt(O,t.extent)){var I=bt(O),E=Math.max(bt(x)/2,I);x[0]=O[0]-E,x[2]=O[2]+E,Wi(m,u);var T=bi(C[0],u);T[0]<O[0]&&T[2]<O[2]?C.push([T[0]+I,T[1],T[2]+I,T[3]]):T[0]>O[0]&&T[2]>O[2]&&C.push([T[0]-I,T[1],T[2]-I,T[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==v&&this.renderedRenderOrder_==g&&Yt(this.wrappedRenderedExtent_,x))return Qt(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var w=new Ue(ge(c,_),x,c,_),k;this.getLayer().getDeclutter()&&(k=new Ue(ge(c,_),x,c,_));var P=ji(),D;if(P){for(var L=0,F=C.length;L<F;++L){var b=C[L],W=be(b,u);e.loadFeatures(W,Yi(c,u),P)}D=Xi(P,u)}else for(var L=0,F=C.length;L<F;++L)e.loadFeatures(C[L],c,u);var M=Br(c,_),N=function(X){var U,tt=X.getStyleFunction()||i.getStyleFunction();if(tt&&(U=tt(X,c)),U){var ft=this.renderFeature(X,M,U,w,D,k);this.dirty_=this.dirty_||ft}}.bind(this),A=be(x,u),G=e.getFeaturesInExtent(A);g&&G.sort(g);for(var L=0,F=G.length;L<F;++L)N(G[L]);this.renderedFeatures_=G;var Y=w.finish(),p=new Ve(x,c,_,e.getOverlaps(),Y,i.getRenderBuffer());return k&&(this.declutterExecutorGroup=new Ve(x,c,_,e.getOverlaps(),k.finish(),i.getRenderBuffer())),this.renderedResolution_=c,this.renderedRevision_=v,this.renderedRenderOrder_=g,this.renderedExtent_=S,this.wrappedRenderedExtent_=x,this.renderedCenter_=m,this.renderedProjection_=u,this.replayGroup_=p,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},r.prototype.renderFeature=function(t,i,e,a,n,s){if(!e)return!1;var o=!1;if(Array.isArray(e))for(var h=0,f=e.length;h<f;++h)o=ze(a,t,e[h],i,this.boundHandleStyleImageChange_,n,s)||o;else o=ze(a,t,e,i,this.boundHandleStyleImageChange_,n,s);return o},r}(Ui),Kr=Jr,$r=globalThis&&globalThis.__extends||function(){var l=function(r,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,e){i.__proto__=e}||function(i,e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a])},l(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(r,t);function i(){this.constructor=r}r.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}}(),qr=function(l){$r(r,l);function r(t){return l.call(this,t)||this}return r.prototype.createRenderer=function(){return new Kr(this)},r}(Hi),Qr=qr;Vi();let Lt=[];const tn=[[14.517521,46.039284,"Dolenjska cesta (Strelisce)"],[14.508285,46.062497,"Bezigrad"],[14.514254,46.087035,"BS4/ I"],[14.514251,46.086728,"BS4/ II"],[14.518,46.074537,"Gosarjeva ulica"],[14.515989,46.074583,"Gosarjeva ulica II."],[14.510116,46.061856,"Gospodarsko razstavisce"],[14.503415,46.050617,"PH Kongresni trg"],[14.504961,46.056943,"Kozolec"],[14.522073,46.070205,"Kranjceva ulica"],[14.50918,46.063127,"Linhartova"],[14.516126,46.056973,"Metelkova ulica"],[14.494343,46.046584,"Mirje"],[14.501974,46.046687,"NUK II."],[14.493818,46.04236,"PH Kolezija"],[14.511568,46.05213,"Petkovskovo nabrezje II."],[14.582565,46.054942,"Pokopalisce Polje"],[14.529375,46.05125,"Povsetova ulica"],[14.508596,46.053622,"Senatorij Emona"],[14.507321,46.088504,"Slovenceva ulica"],[14.500366,46.056411,"Tivoli I."],[14.497231,46.059912,"Tivoli II."],[14.49567,46.046982,"Trg mladinskih delovnih brigad"],[14.488943,46.068388,"Trg prekomorskih brigad"],[14.528873,46.068968,"Zale I."],[14.52868,46.067131,"Zale II."],[14.526062,46.067969,"Zale III."],[14.526815,46.069497,"Zale IV."],[14.531361,46.074782,"Zale V."]],me=new Je({image:new xe({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"location.svg",scale:[.07,.07]})});tn.forEach(l=>{let r=new zi({name:l[2],geometry:new Zi([l[0],l[1]])});r.setStyle(me),Lt.push(r)});const en=new Ji({source:new Ki}),rn=new Qr({source:new $i({features:Lt})}),Qe=new qi({layers:[en,rn],target:"map",view:new Qi({center:[14.505751,46.056946],zoom:13})});Qe.on("singleclick",function(l){console.log(l.coordinate),Swal.fire({title:"<h1>Priporo\u010Dilni sistem</h1><br>",html:`
            <div class="recommenderModal">
                Koordinate cilja: <b>${l.coordinate[0].toFixed(4)}</b> - <b>${l.coordinate[1].toFixed(4)}</b><br>
                Datum prihoda: <input style="top: 0px;" type="text" name="daterange" value="" /><br>
            </div>
          `,showCloseButton:!0,showCancelButton:!0,focusConfirm:!1,showLoaderOnConfirm:!0,confirmButtonText:'<i class="fa fa-thumbs-up"></i> Potrdi',cancelButtonText:'<i class="fa fa-thumbs-down"></i> Prekli\u010Di'}).then(r=>{if(r.isConfirmed){let t={};console.log($('input[name="daterange"]').val()),$.ajax({url:"getRecommendation",dataType:"json",type:"post",contentType:"application/json",data:JSON.stringify({x:l.coordinate[0],y:l.coordinate[1],date:$('input[name="daterange"]').val()}),processData:!1,success:function(i,e,a){console.log(i),t=i,Lt.forEach(n=>{n.setStyle(me)}),Lt.forEach(n=>{n.getProperties().name==t&&n.setStyle(new Je({image:new xe({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"location_recommended.svg",scale:[.12,.12]})}))})},error:function(i,e,a){console.log(a)}}).then(()=>{Swal.fire({title:"<h1>Priporo\u010Deno parkiri\u0161\u010De:</h1><br>",html:`
                        <h2>${t}</h2>
                        <div class="recommenderModal">
                        </div>
                      `,showCloseButton:!0,showCancelButton:!1,focusConfirm:!0,confirmButtonText:'<i class="fa fa-thumbs-up"></i> Izhod'})})}}),$('input[name="daterange"]').daterangepicker({singleDatePicker:!0,locale:{format:"DD/MM/YYYY"}})});Qe.on("movestart",function(){});$("#clearRec").click(()=>{Lt.forEach(l=>{l.setStyle(me)})});
//# sourceMappingURL=recommender.b0964c72.js.map

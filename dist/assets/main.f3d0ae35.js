import{a as Q,S as ce,b as ee,g as E,c as y,r as O,s as le,d as _e,e as te,f as de,D as pe,L as ve,R,h as N,i as F,j as ge,k as me,l as Te,m as Ee,n as ye,o as S,V as P,p as Y,q as Re,B as re,t as xe,u as Ae,G as be,v as Le,w as Ce,x as Se,y as Pe,z as Ie,F as ne,P as ie,A as ae,T as De,O as Be,M as Fe,C as we}from"./Tile.72557d1c.js";var w=34962,j=34963,Ue=35040,Ge=35044,D=35048,Me=5121,Oe=5123,Ne=5125,oe=5126,K=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function se(a,i){for(var e=Q({preserveDrawingBuffer:!0,antialias:!ce},i),t=K.length,r=0;r<t;++r)try{var n=a.getContext(K[r],e);if(n)return n}catch{}return null}var ze={STATIC_DRAW:Ge,STREAM_DRAW:Ue,DYNAMIC_DRAW:D},Xe=function(){function a(i,e){this.array=null,this.type=i,ee(i===w||i===j,62),this.usage=e!==void 0?e:ze.STATIC_DRAW}return a.prototype.ofSize=function(i){this.array=new(z(this.type))(i)},a.prototype.fromArray=function(i){var e=z(this.type);this.array=e.from?e.from(i):new e(i)},a.prototype.fromArrayBuffer=function(i){this.array=new(z(this.type))(i)},a.prototype.getType=function(){return this.type},a.prototype.getArray=function(){return this.array},a.prototype.getUsage=function(){return this.usage},a.prototype.getSize=function(){return this.array?this.array.length:0},a}();function z(a){switch(a){case w:return Float32Array;case j:return Uint32Array;default:return Float32Array}}var X=Xe,I={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},We=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,He=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,je=function(){function a(i){this.gl_=i.webGlContext;var e=this.gl_;this.scaleRatio_=i.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var t=e.createShader(e.VERTEX_SHADER);e.shaderSource(t,i.vertexShader||We),e.compileShader(t);var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i.fragmentShader||He),e.compileShader(r),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,t),e.attachShader(this.renderTargetProgram_,r),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();var n=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],i.uniforms&&Object.keys(i.uniforms).forEach(function(o){this.uniforms_.push({value:i.uniforms[o],location:e.getUniformLocation(this.renderTargetProgram_,o)})}.bind(this))}return a.prototype.getGL=function(){return this.gl_},a.prototype.init=function(i){var e=this.getGL(),t=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,t[0],t[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==t[0]||this.renderTargetTextureSize_[1]!==t[1]){this.renderTargetTextureSize_=t;var r=0,n=e.RGBA,o=0,s=e.RGBA,u=e.UNSIGNED_BYTE,f=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,r,n,t[0],t[1],o,s,u,f),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},a.prototype.apply=function(i,e,t,r){var n=this.getGL(),o=i.size;if(n.bindFramebuffer(n.FRAMEBUFFER,e?e.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!e){var s=E(n.canvas);if(!i.renderTargets[s]){var u=n.getContextAttributes();u&&u.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)),i.renderTargets[s]=!0}}n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),n.uniform1i(this.renderTargetTextureLocation_,0);var f=i.layerStatesArray[i.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,f),this.applyUniforms(i),t&&t(n,i),n.drawArrays(n.TRIANGLES,0,6),r&&r(n,i)},a.prototype.getFrameBuffer=function(){return this.frameBuffer_},a.prototype.applyUniforms=function(i){var e=this.getGL(),t,r=1;this.uniforms_.forEach(function(n){if(t=typeof n.value=="function"?n.value(i):n.value,t instanceof HTMLCanvasElement||t instanceof ImageData)n.texture||(n.texture=e.createTexture()),e.activeTexture(e["TEXTURE".concat(r)]),e.bindTexture(e.TEXTURE_2D,n.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,t.width,t.height,0,e.UNSIGNED_BYTE,new Uint8Array(t.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.uniform1i(n.location,r++);else if(Array.isArray(t))switch(t.length){case 2:e.uniform2f(n.location,t[0],t[1]);return;case 3:e.uniform3f(n.location,t[0],t[1],t[2]);return;case 4:e.uniform4f(n.location,t[0],t[1],t[2],t[3]);return;default:return}else typeof t=="number"&&e.uniform1f(n.location,t)})},a}(),q=je;function Ve(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function W(a,i){return a[0]=i[0],a[1]=i[1],a[4]=i[2],a[5]=i[3],a[12]=i[4],a[13]=i[5],a}var ke=globalThis&&globalThis.__extends||function(){var a=function(i,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},a(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),x={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},p={UNSIGNED_BYTE:Me,UNSIGNED_SHORT:Oe,UNSIGNED_INT:Ne,FLOAT:oe},U={};function Z(a){return"shared/"+a}var J=0;function Ye(){var a="unique/"+J;return J+=1,a}function $e(a){var i=U[a];if(!i){var e=document.createElement("canvas");e.style.position="absolute",e.style.left="0",i={users:0,canvas:e},U[a]=i}return i.users+=1,i.canvas}function Ke(a){var i=U[a];if(!!i&&(i.users-=1,!(i.users>0))){var e=i.canvas,t=se(e),r=t.getExtension("WEBGL_lose_context");r&&r.loseContext(),delete U[a]}}var qe=function(a){ke(i,a);function i(e){var t=a.call(this)||this,r=e||{};t.boundHandleWebGLContextLost_=t.handleWebGLContextLost.bind(t),t.boundHandleWebGLContextRestored_=t.handleWebGLContextRestored.bind(t),t.canvasCacheKey_=r.canvasCacheKey?Z(r.canvasCacheKey):Ye(),t.canvas_=$e(t.canvasCacheKey_),t.gl_=se(t.canvas_),t.bufferCache_={},t.extensionCache_={},t.currentProgram_=null,t.canvas_.addEventListener(I.LOST,t.boundHandleWebGLContextLost_),t.canvas_.addEventListener(I.RESTORED,t.boundHandleWebGLContextRestored_),t.offsetRotateMatrix_=y(),t.offsetScaleMatrix_=y(),t.tmpMat4_=Ve(),t.uniformLocations_={},t.attribLocations_={},t.uniforms_=[],r.uniforms&&t.setUniforms(r.uniforms);var n=t.getGL();return t.postProcessPasses_=r.postProcesses?r.postProcesses.map(function(o){return new q({webGlContext:n,scaleRatio:o.scaleRatio,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,uniforms:o.uniforms})}):[new q({webGlContext:n})],t.shaderCompileErrors_=null,t.startTime_=Date.now(),t}return i.prototype.setUniforms=function(e){this.uniforms_=[];for(var t in e)this.uniforms_.push({name:t,value:e[t]});this.uniformLocations_={}},i.prototype.canvasCacheKeyMatches=function(e){return this.canvasCacheKey_===Z(e)},i.prototype.getExtension=function(e){if(e in this.extensionCache_)return this.extensionCache_[e];var t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t},i.prototype.bindBuffer=function(e){var t=this.getGL(),r=E(e),n=this.bufferCache_[r];if(!n){var o=t.createBuffer();n={buffer:e,webGlBuffer:o},this.bufferCache_[r]=n}t.bindBuffer(e.getType(),n.webGlBuffer)},i.prototype.flushBufferData=function(e){var t=this.getGL();this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())},i.prototype.deleteBuffer=function(e){var t=this.getGL(),r=E(e),n=this.bufferCache_[r];n&&!t.isContextLost()&&t.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},i.prototype.disposeInternal=function(){this.canvas_.removeEventListener(I.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(I.RESTORED,this.boundHandleWebGLContextRestored_),Ke(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},i.prototype.prepareDraw=function(e,t){var r=this.getGL(),n=this.getCanvas(),o=e.size,s=e.pixelRatio;n.width=o[0]*s,n.height=o[1]*s,n.style.width=o[0]+"px",n.style.height=o[1]+"px",r.useProgram(this.currentProgram_);for(var u=this.postProcessPasses_.length-1;u>=0;u--)this.postProcessPasses_[u].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},i.prototype.prepareDrawToRenderTarget=function(e,t,r){var n=this.getGL(),o=t.getSize();n.bindFramebuffer(n.FRAMEBUFFER,t.getFramebuffer()),n.viewport(0,0,o[0],o[1]),n.bindTexture(n.TEXTURE_2D,t.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(e),this.applyUniforms(e)},i.prototype.drawElements=function(e,t){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,o=4,s=t-e,u=e*o;r.drawElements(r.TRIANGLES,s,n,u)},i.prototype.finalizeDraw=function(e,t,r){for(var n=0,o=this.postProcessPasses_.length;n<o;n++)n===o-1?this.postProcessPasses_[n].apply(e,null,t,r):this.postProcessPasses_[n].apply(e,this.postProcessPasses_[n+1])},i.prototype.getCanvas=function(){return this.canvas_},i.prototype.getGL=function(){return this.gl_},i.prototype.applyFrameState=function(e){var t=e.size,r=e.viewState.rotation,n=O(this.offsetScaleMatrix_);le(n,2/t[0],2/t[1]);var o=O(this.offsetRotateMatrix_);r!==0&&_e(o,-r),this.setUniformMatrixValue(x.OFFSET_SCALE_MATRIX,W(this.tmpMat4_,n)),this.setUniformMatrixValue(x.OFFSET_ROTATION_MATRIX,W(this.tmpMat4_,o)),this.setUniformFloatValue(x.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(x.ZOOM,e.viewState.zoom),this.setUniformFloatValue(x.RESOLUTION,e.viewState.resolution)},i.prototype.applyUniforms=function(e){var t=this.getGL(),r,n=0;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(e):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData){o.texture||(o.prevValue=void 0,o.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(n)]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);var s=!(r instanceof HTMLImageElement)||r.complete;s&&o.prevValue!==r&&(o.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),t.uniform1i(this.getUniformLocation(o.name),n++)}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,W(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(o.name),r)}.bind(this))},i.prototype.useProgram=function(e){if(e==this.currentProgram_)return!1;var t=this.getGL();return t.useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0},i.prototype.compileShader=function(e,t){var r=this.getGL(),n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n},i.prototype.getProgram=function(e,t){var r=this.getGL(),n=this.compileShader(e,r.FRAGMENT_SHADER),o=this.compileShader(t,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,n),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(n,r.COMPILE_STATUS)){var u="Fragment shader compliation failed: ".concat(r.getShaderInfoLog(n));throw new Error(u)}if(r.deleteShader(n),!r.getShaderParameter(o,r.COMPILE_STATUS)){var u="Vertex shader compilation failed: ".concat(r.getShaderInfoLog(o));throw new Error(u)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){var u="GL program linking failed: ".concat(r.getShaderInfoLog(o));throw new Error(u)}return s},i.prototype.getUniformLocation=function(e){return this.uniformLocations_[e]===void 0&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]},i.prototype.getAttributeLocation=function(e){return this.attribLocations_[e]===void 0&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]},i.prototype.makeProjectionTransform=function(e,t){var r=e.size,n=e.viewState.rotation,o=e.viewState.resolution,s=e.viewState.center;return O(t),te(t,0,0,2/(o*r[0]),2/(o*r[1]),-n,-s[0],-s[1]),t},i.prototype.setUniformFloatValue=function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)},i.prototype.setUniformFloatVec4=function(e,t){this.getGL().uniform4fv(this.getUniformLocation(e),t)},i.prototype.setUniformMatrixValue=function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)},i.prototype.enableAttributeArray_=function(e,t,r,n,o){var s=this.getAttributeLocation(e);s<0||(this.getGL().enableVertexAttribArray(s),this.getGL().vertexAttribPointer(s,t,r,!1,n,o))},i.prototype.enableAttributes=function(e){for(var t=Ze(e),r=0,n=0;n<e.length;n++){var o=e[n];this.enableAttributeArray_(o.name,o.size,o.type||oe,t,r),r+=o.size*ue(o.type)}},i.prototype.handleWebGLContextLost=function(){de(this.bufferCache_),this.currentProgram_=null},i.prototype.handleWebGLContextRestored=function(){},i.prototype.createTexture=function(e,t,r){var n=this.getGL(),o=r||n.createTexture(),s=0,u=n.RGBA,f=0,h=n.RGBA,c=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,o),t?n.texImage2D(n.TEXTURE_2D,s,u,h,c,t):n.texImage2D(n.TEXTURE_2D,s,u,e[0],e[1],f,h,c,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),o},i}(pe);function Ze(a){for(var i=0,e=0;e<a.length;e++){var t=a[e];i+=t.size*ue(t.type)}return i}function ue(a){switch(a){case p.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case p.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case p.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case p.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Je=globalThis&&globalThis.__extends||function(){var a=function(i,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},a(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),H={GENERATE_BUFFERS:"GENERATE_BUFFERS"},Qe=function(a){Je(i,a);function i(e,t){var r=a.call(this,e)||this,n=t||{};return r.inversePixelTransform_=y(),r.pixelContext_=null,r.postProcesses_=n.postProcesses,r.uniforms_=n.uniforms,r.helper,e.addChangeListener(ve.MAP,r.removeHelper.bind(r)),r.dispatchPreComposeEvent=r.dispatchPreComposeEvent.bind(r),r.dispatchPostComposeEvent=r.dispatchPostComposeEvent.bind(r),r}return i.prototype.dispatchPreComposeEvent=function(e,t){var r=this.getLayer();if(r.hasListener(R.PRECOMPOSE)){var n=new N(R.PRECOMPOSE,void 0,t,e);r.dispatchEvent(n)}},i.prototype.dispatchPostComposeEvent=function(e,t){var r=this.getLayer();if(r.hasListener(R.POSTCOMPOSE)){var n=new N(R.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(n)}},i.prototype.reset=function(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},i.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},i.prototype.prepareFrame=function(e){if(this.getLayer().getRenderSource()){for(var t=!0,r=-1,n=void 0,o=0,s=e.layerStatesArray.length;o<s;o++){var u=e.layerStatesArray[o].layer,f=u.getRenderer();if(!(f instanceof i)){t=!0;continue}var h=u.getClassName();if((t||h!==n)&&(r+=1,t=!1),n=h,f===this)break}var c="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(c))&&(this.removeHelper(),this.helper=new qe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),n&&(this.helper.getCanvas().className=n),this.afterHelperCreated())}return this.prepareFrameInternal(e)},i.prototype.afterHelperCreated=function(){},i.prototype.prepareFrameInternal=function(e){return!0},i.prototype.disposeInternal=function(){this.removeHelper(),a.prototype.disposeInternal.call(this)},i.prototype.dispatchRenderEvent_=function(e,t,r){var n=this.getLayer();if(n.hasListener(e)){te(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var o=new N(e,this.inversePixelTransform_,r,t);n.dispatchEvent(o)}},i.prototype.preRender=function(e,t){this.dispatchRenderEvent_(R.PRERENDER,e,t)},i.prototype.postRender=function(e,t){this.dispatchRenderEvent_(R.POSTRENDER,e,t)},i.prototype.getDataAtPixel=function(e,t,r){var n=F([t.pixelRatio,0,0,t.pixelRatio,0,0],e.slice()),o=this.helper.getGL();if(!o)return null;var s=this.getLayer(),u=s.getExtent();if(u){var f=F(t.pixelToCoordinateTransform,e.slice());if(!ge(u,f))return null}var h=o.getContextAttributes();if(!h||!h.preserveDrawingBuffer)return new Uint8Array;var c=Math.round(n[0]),l=Math.round(n[1]),_=this.pixelContext_;if(!_){var v=document.createElement("canvas");v.width=1,v.height=1,_=v.getContext("2d"),this.pixelContext_=_}_.clearRect(0,0,1,1);var T;try{_.drawImage(o.canvas,c,l,1,1,0,0,1,1),T=_.getImageData(0,0,1,1).data}catch{return T}return T[3]===0?null:T},i}(me);function et(a,i){var e=i||[],t=256,r=t-1;return e[0]=Math.floor(a/t/t/t)/r,e[1]=Math.floor(a/t/t)%t/r,e[2]=Math.floor(a/t)%t/r,e[3]=a%t/r,e}function tt(a){var i=0,e=256,t=e-1;return i+=Math.round(a[0]*e*e*e*t),i+=Math.round(a[1]*e*e*t),i+=Math.round(a[2]*e*t),i+=Math.round(a[3]*t),i}var rt=Qe,g=new Uint8Array(4),nt=function(){function a(i,e){this.helper_=i;var t=i.getGL();this.texture_=t.createTexture(),this.framebuffer_=t.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return a.prototype.setSize=function(i){Te(i,this.size_)||(this.size_[0]=i[0],this.size_[1]=i[1],this.updateSize_())},a.prototype.getSize=function(){return this.size_},a.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},a.prototype.readAll=function(){if(this.dataCacheDirty_){var i=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,i[0],i[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},a.prototype.readPixel=function(i,e){if(i<0||e<0||i>this.size_[0]||e>=this.size_[1])return g[0]=0,g[1]=0,g[2]=0,g[3]=0,g;this.readAll();var t=Math.floor(i)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return g[0]=this.data_[t*4],g[1]=this.data_[t*4+1],g[2]=this.data_[t*4+2],g[3]=this.data_[t*4+3],g},a.prototype.getTexture=function(){return this.texture_},a.prototype.getFramebuffer=function(){return this.framebuffer_},a.prototype.updateSize_=function(){var i=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(i,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,i[0],i[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(i[0]*i[1]*4)},a}(),it=nt;function at(){var a='var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,a){var u=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=a?a.vertexPosition:0,h=a?a.indexPosition:0,d=b/u;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=u,l,v,1),c.length&&i.set(c,b+3),o(i,b+=u,l,v,2),c.length&&i.set(c,b+3),o(i,b+=u,l,v,3),c.length&&i.set(c,b+3),b+=u,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o,s=r.customAttributesCount,a=2+s,u=new Float32Array(r.renderInstructions),l=u.length/a,v=4*l*(s+3),c=new Uint32Array(6*l),g=new Float32Array(v),b=0;b<u.length;b+=a)o=i(u,b,g,c,s,o);var h=e({vertexBuffer:g.buffer,indexBuffer:c.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[g.buffer,c.buffer,u.buffer])}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(a,"binary").toString("base64"):URL.createObjectURL(new Blob([a],{type:"application/javascript"})))}var ot=globalThis&&globalThis.__extends||function(){var a=function(i,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},a(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),st=function(a){ot(i,a);function i(e,t){var r=this,n=t.uniforms||{},o=y();n[x.PROJECTION_MATRIX]=o,r=a.call(this,e,{uniforms:n,postProcesses:t.postProcesses})||this,r.ready=!1,r.sourceRevision_=-1,r.verticesBuffer_=new X(w,D),r.hitVerticesBuffer_=new X(w,D),r.indicesBuffer_=new X(j,D),r.vertexShader_=t.vertexShader,r.fragmentShader_=t.fragmentShader,r.program_,r.hitDetectionEnabled_=!!(t.hitFragmentShader&&t.hitVertexShader),r.hitVertexShader_=t.hitVertexShader,r.hitFragmentShader_=t.hitFragmentShader,r.hitProgram_;var s=t.attributes?t.attributes.map(function(f){return{name:"a_"+f.name,size:1,type:p.FLOAT}}):[];r.attributes=[{name:"a_position",size:2,type:p.FLOAT},{name:"a_index",size:1,type:p.FLOAT}].concat(s),r.hitDetectionAttributes=[{name:"a_position",size:2,type:p.FLOAT},{name:"a_index",size:1,type:p.FLOAT},{name:"a_hitColor",size:4,type:p.FLOAT},{name:"a_featureUid",size:1,type:p.FLOAT}].concat(s),r.customAttributes=t.attributes?t.attributes:[],r.previousExtent_=Ee(),r.currentTransform_=o,r.renderTransform_=y(),r.invertRenderTransform_=y(),r.renderInstructions_=new Float32Array(0),r.hitRenderInstructions_=new Float32Array(0),r.hitRenderTarget_,r.generateBuffersRun_=0,r.worker_=at(),r.worker_.addEventListener("message",function(f){var h=f.data;if(h.type===H.GENERATE_BUFFERS){var c=h.projectionTransform;h.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(h.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(h.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(h.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=c,ye(this.invertRenderTransform_,this.renderTransform_),h.hitDetection?this.hitRenderInstructions_=new Float32Array(f.data.renderInstructions):(this.renderInstructions_=new Float32Array(f.data.renderInstructions),h.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}.bind(r)),r.featureCache_={},r.featureCount_=0;var u=r.getLayer().getSource();return r.sourceListenKeys_=[S(u,P.ADDFEATURE,r.handleSourceFeatureAdded_,r),S(u,P.CHANGEFEATURE,r.handleSourceFeatureChanged_,r),S(u,P.REMOVEFEATURE,r.handleSourceFeatureDelete_,r),S(u,P.CLEAR,r.handleSourceFeatureClear_,r)],u.forEachFeature(function(f){this.featureCache_[E(f)]={feature:f,properties:f.getProperties(),geometry:f.getGeometry()},this.featureCount_++}.bind(r)),r}return i.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new it(this.helper))},i.prototype.handleSourceFeatureAdded_=function(e){var t=e.feature;this.featureCache_[E(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++},i.prototype.handleSourceFeatureChanged_=function(e){var t=e.feature;this.featureCache_[E(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}},i.prototype.handleSourceFeatureDelete_=function(e){var t=e.feature;delete this.featureCache_[E(t)],this.featureCount_--},i.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},i.prototype.renderFrame=function(e){var t=this.helper.getGL();this.preRender(t,e);var r=this.indicesBuffer_.getSize();this.helper.drawElements(0,r),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);var n=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(e),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),n},i.prototype.prepareFrameInternal=function(e){var t=this.getLayer(),r=t.getSource(),n=e.viewState,o=!e.viewHints[Y.ANIMATING]&&!e.viewHints[Y.INTERACTING],s=!Re(this.previousExtent_,e.extent),u=this.sourceRevision_<r.getRevision();if(u&&(this.sourceRevision_=r.getRevision()),o&&(s||u)){var f=n.projection,h=n.resolution,c=t instanceof re?t.getRenderBuffer():0,l=xe(e.extent,c*h);r.loadFeatures(l,h,f),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.makeProjectionTransform(e,this.currentTransform_),Ae(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},i.prototype.rebuildBuffers_=function(e){var t=y();this.helper.makeProjectionTransform(e,t);var r=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==r)&&(this.renderInstructions_=new Float32Array(r)),this.hitDetectionEnabled_){var n=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==n)&&(this.hitRenderInstructions_=new Float32Array(n))}var o,s,u=[],f=[],h=0,c=0,l;for(var _ in this.featureCache_)if(o=this.featureCache_[_],s=o.geometry,!(!s||s.getType()!==be.POINT)){u[0]=s.getFlatCoordinates()[0],u[1]=s.getFlatCoordinates()[1],F(t,u),l=et(c+6,f),this.renderInstructions_[h++]=u[0],this.renderInstructions_[h++]=u[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[c++]=u[0],this.hitRenderInstructions_[c++]=u[1],this.hitRenderInstructions_[c++]=l[0],this.hitRenderInstructions_[c++]=l[1],this.hitRenderInstructions_[c++]=l[2],this.hitRenderInstructions_[c++]=l[3],this.hitRenderInstructions_[c++]=Number(_));for(var v=void 0,T=0;T<this.customAttributes.length;T++)v=this.customAttributes[T].callback(o.feature,o.properties),this.renderInstructions_[h++]=v,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[c++]=v)}var C={type:H.GENERATE_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(C.projectionTransform=t,C.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(C,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var M={type:H.GENERATE_BUFFERS,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};M.projectionTransform=t,M.hitDetection=!0,this.worker_.postMessage(M,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},i.prototype.forEachFeatureAtCoordinate=function(e,t,r,n,o){if(ee(this.hitDetectionEnabled_,66),!!this.hitRenderInstructions_){var s=F(t.coordinateToPixelTransform,e.slice()),u=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),f=[u[0]/255,u[1]/255,u[2]/255,u[3]/255],h=tt(f),c=this.hitRenderInstructions_[h],l=Math.floor(c).toString(),_=this.getLayer().getSource(),v=_.getFeatureByUid(l);if(v)return n(v,this.getLayer(),null)}},i.prototype.renderHitDetection=function(e){if(!!this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var t=this.indicesBuffer_.getSize();this.helper.drawElements(0,t)}},i.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){Le(e)}),this.sourceListenKeys_=null,a.prototype.disposeInternal.call(this)},i}(rt),ut=st,ft=globalThis&&globalThis.__extends||function(){var a=function(i,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])},a(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),d={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},ht=["#00f","#0ff","#0f0","#ff0","#f00"],ct=function(a){ft(i,a);function i(e){var t=this,r=e||{},n=Q({},r);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,t=a.call(this,n)||this,t.gradient_=null,t.addChangeListener(d.GRADIENT,t.handleGradientChanged_),t.setGradient(r.gradient?r.gradient:ht),t.setBlur(r.blur!==void 0?r.blur:15),t.setRadius(r.radius!==void 0?r.radius:8);var o=r.weight?r.weight:"weight";return typeof o=="string"?t.weightFunction_=function(s){return s.get(o)}:t.weightFunction_=o,t.setRenderOrder(null),t}return i.prototype.getBlur=function(){return this.get(d.BLUR)},i.prototype.getGradient=function(){return this.get(d.GRADIENT)},i.prototype.getRadius=function(){return this.get(d.RADIUS)},i.prototype.handleGradientChanged_=function(){this.gradient_=lt(this.getGradient())},i.prototype.setBlur=function(e){this.set(d.BLUR,e)},i.prototype.setGradient=function(e){this.set(d.GRADIENT,e)},i.prototype.setRadius=function(e){this.set(d.RADIUS,e)},i.prototype.createRenderer=function(){return new ut(this,{className:this.getClassName(),attributes:[{name:"weight",callback:function(e){var t=this.weightFunction_(e);return t!==void 0?Ce(t,0,1):1}.bind(this)}],vertexShader:`
        precision mediump float;
        uniform mat4 u_projectionMatrix;
        uniform mat4 u_offsetScaleMatrix;
        uniform float u_size;
        attribute vec2 a_position;
        attribute float a_index;
        attribute float a_weight;

        varying vec2 v_texCoord;
        varying float v_weight;

        void main(void) {
          mat4 offsetMatrix = u_offsetScaleMatrix;
          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;
          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;
          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);
          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;
          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;
          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;
          v_texCoord = vec2(u, v);
          v_weight = a_weight;
        }`,fragmentShader:`
        precision mediump float;
        uniform float u_blurSlope;

        varying vec2 v_texCoord;
        varying float v_weight;

        void main(void) {
          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);
          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;
          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;
          float alpha = smoothstep(0.0, 1.0, value) * v_weight;
          gl_FragColor = vec4(alpha, alpha, alpha, alpha);
        }`,hitVertexShader:`
        precision mediump float;
        uniform mat4 u_projectionMatrix;
        uniform mat4 u_offsetScaleMatrix;
        uniform float u_size;
        attribute vec2 a_position;
        attribute float a_index;
        attribute float a_weight;
        attribute vec4 a_hitColor;

        varying vec2 v_texCoord;
        varying float v_weight;
        varying vec4 v_hitColor;

        void main(void) {
          mat4 offsetMatrix = u_offsetScaleMatrix;
          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;
          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;
          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);
          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;
          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;
          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;
          v_texCoord = vec2(u, v);
          v_hitColor = a_hitColor;
          v_weight = a_weight;
        }`,hitFragmentShader:`
        precision mediump float;
        uniform float u_blurSlope;

        varying vec2 v_texCoord;
        varying float v_weight;
        varying vec4 v_hitColor;

        void main(void) {
          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);
          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;
          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;
          float alpha = smoothstep(0.0, 1.0, value) * v_weight;
          if (alpha < 0.05) {
            discard;
          }

          gl_FragColor = v_hitColor;
        }`,uniforms:{u_size:function(){return(this.get(d.RADIUS)+this.get(d.BLUR))*2}.bind(this),u_blurSlope:function(){return this.get(d.RADIUS)/Math.max(1,this.get(d.BLUR))}.bind(this)},postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this),u_opacity:function(){return this.getOpacity()}.bind(this)}}]})},i.prototype.renderDeclutter=function(){},i}(re);function lt(a){for(var i=1,e=256,t=Se(i,e),r=t.createLinearGradient(0,0,i,e),n=1/(a.length-1),o=0,s=a.length;o<s;++o)r.addColorStop(o*n,a[o]);return t.fillStyle=r,t.fillRect(0,0,i,e),t.canvas}var _t=ct;Pe();const m=await fetch("data.json").then(a=>a.json()).then(a=>a);console.log(m);let b=0,B=m.Bezigrad.percent_occupied.length,L=b;$('input[name="daterange"]').daterangepicker({locale:{format:"DD/MM/YYYY"},minDate:new Date(Math.min(...m.Bezigrad.timestamps)*1e3),maxDate:new Date(Math.max(...m.Bezigrad.timestamps)*1e3)});$('input[name="daterange"]').on("apply.daterangepicker",(a,i)=>{let e=Math.floor(i.startDate._d.getTime()/1e3),t=Math.floor(i.endDate._d.getTime()/1e3);b=-1,B=-1;for(let r=0;r<m.Bezigrad.timestamps.length;r++)if(console.log(r),b==-1&&e<=m.Bezigrad.timestamps[r]&&(b=r),B==-1&&m.Bezigrad.timestamps[r]>=t){B=r;break}L=b});const V=document.getElementById("speed");let k=50,A=!1;$("#stop").addClass("activeButton");let G=new Ie;G.addFeature(new ne({name:"MAX",geometry:new ie(ae([0,0,0])),magnitude:1}));const dt=[[14.517521,46.039284,"Dolenjska cesta (Strelisce)"],[14.508285,46.062497,"Bezigrad"],[14.514254,46.087035,"BS4/ I"],[14.514251,46.086728,"BS4/ II"],[14.518,46.074537,"Gosarjeva ulica"],[14.515989,46.074583,"Gosarjeva ulica II."],[14.510116,46.061856,"Gospodarsko razstavisce"],[14.503415,46.050617,"PH Kongresni trg"],[14.504961,46.056943,"Kozolec"],[14.522073,46.070205,"Kranjceva ulica"],[14.50918,46.063127,"Linhartova"],[14.516126,46.056973,"Metelkova ulica"],[14.494343,46.046584,"Mirje"],[14.501974,46.046687,"NUK II."],[14.493818,46.04236,"PH Kolezija"],[14.511568,46.05213,"Petkovskovo nabrezje II."],[14.582565,46.054942,"Pokopalisce Polje"],[14.529375,46.05125,"Povsetova ulica"],[14.508596,46.053622,"Senatorij Emona"],[14.507321,46.088504,"Slovenceva ulica"],[14.500366,46.056411,"Tivoli I."],[14.497231,46.059912,"Tivoli II."],[14.49567,46.046982,"Trg mladinskih delovnih brigad"],[14.488943,46.068388,"Trg prekomorskih brigad"],[14.528873,46.068968,"Zale I."],[14.52868,46.067131,"Zale II."],[14.526062,46.067969,"Zale III."],[14.526815,46.069497,"Zale IV."],[14.531361,46.074782,"Zale V."]];dt.forEach(a=>{G.addFeature(new ne({name:a[2],geometry:new ie(ae([a[0],a[1],0])),magnitude:0}))});const pt=new _t({source:G,blur:18,radius:20,weight:a=>(a.get("name"),a.get("magnitude"))}),vt=new De({source:new Be}),gt=new Fe({layers:[vt,pt],target:"map",view:new we({center:[14.505751,46.056946],zoom:13})});let fe=()=>{if(A){G.forEachFeature(i=>{let e=i.getProperties().name;if(e!=="MAX"){let t=m[e].percent_occupied[L];L<B||(A=!1,$("#play").removeClass("activeButton"),$("#stop").addClass("activeButton")),i.setProperties({magnitude:t})}}),gt.render();let a=new Date(m.Bezigrad.timestamps[L]*1e3);$("#currentTime").html(`
            <p>${a.toLocaleDateString()}</p>
            <p>${a.toLocaleTimeString()}</p>
        `),L++,setTimeout(fe,k)}};$("#play").click(()=>{A||(A=!0,setTimeout(fe,k),$("#play").addClass("activeButton"),$("#stop").removeClass("activeButton"))});$("#stop").click(()=>{A&&(A=!1,$("#play").removeClass("activeButton"),$("#stop").addClass("activeButton"))});const he=()=>{k=500-parseInt(V.value)};V.addEventListener("input",he);V.addEventListener("speed",he);
//# sourceMappingURL=main.f3d0ae35.js.map
